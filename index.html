<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>The Library</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <!-- Optional: Add icon library like Font Awesome if you prefer icons over emojis -->
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"> -->

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg-dark: #1a1a1a;
      --bg-medium: #2c2c2c;
      --bg-light: #3f3f3f;
      --text-light: #e0e0e0;
      --text-medium: #aaaaaa;
      --accent-color: #00bfff; /* Deep Sky Blue - adjust as desired */
      --accent-hover: #009acd;
      --border-color: #444444;
      --shadow-color: rgba(0, 0, 0, 0.5);
    }

    body {
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(135deg, var(--bg-dark) 0%, var(--bg-medium) 100%);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      color: var(--text-light);
      position: relative;
    }

    header {
      text-align: center;
      padding: 40px 20px 20px 20px;
    }

    header h1 {
      font-size: 2.8em;
      margin-bottom: 10px;
      color: var(--text-light);
      font-weight: 700;
      letter-spacing: 1px;
    }

    header p {
      font-size: 1.1em;
      color: var(--text-medium);
    }

    nav {
      width: 100%;
      background: rgba(30, 30, 30, 0.9);
      padding: 10px 0;
      box-shadow: 0 2px 5px var(--shadow-color);
      position: sticky;
      top: 0;
      z-index: 1000;
      border-bottom: 1px solid var(--border-color);
    }

    .app-list {
      display: flex;
      overflow-x: auto;
      padding: 15px 25px;
      gap: 20px;
      list-style: none;
      justify-content: center;
    }

    .app-list::-webkit-scrollbar { display: none; }
    .app-list { -ms-overflow-style: none; scrollbar-width: none; }

    .app-link {
      background: var(--bg-light);
      border-radius: 10px;
      padding: 15px 25px;
      min-width: 140px;
      text-align: center;
      text-decoration: none;
      color: var(--text-light);
      box-shadow: 0 3px 6px var(--shadow-color);
      transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      white-space: nowrap;
      border: 1px solid transparent;
    }

    .app-link:hover,
    .app-link.active {
      transform: translateY(-4px);
      box-shadow: 0 6px 12px var(--shadow-color);
      background-color: var(--bg-medium);
      border-color: var(--accent-color);
    }

    .app-link span.emoji {
      font-size: 2.2em;
    }

    .app-link span.text {
      font-size: 1em;
      font-weight: 700;
    }

    /* Styles for the Collapsible Generator Section */
    #generator-details { /* Style the <details> container */
        width: 90%;
        max-width: 1200px;
        margin: 30px auto;
        background: var(--bg-medium);
        border-radius: 10px;
        border: 1px solid var(--border-color);
        box-shadow: 0 4px 10px var(--shadow-color);
        overflow: hidden; /* Contain children */
    }
    #generator-summary { /* Style the <summary> trigger */
        padding: 15px 25px;
        cursor: pointer;
        font-size: 1.5em; /* Make trigger text larger */
        font-weight: 700;
        color: var(--text-light);
        list-style: none; /* Remove default marker */
        outline: none; /* Remove focus ring if desired */
        background-color: var(--bg-light); /* Slightly different bg for trigger */
        border-bottom: 1px solid var(--border-color); /* Separator when closed */
        transition: background-color 0.2s ease;
    }
    #generator-summary:hover {
        background-color: var(--bg-medium);
    }
    #generator-details[open] > #generator-summary { /* Style summary when details are open */
       border-bottom: 1px solid var(--border-color); /* Keep separator when open */
    }
    #generator-summary::-webkit-details-marker { display: none; } /* Hide Webkit marker */

    .generator-content { /* Container for the form and output */
        padding: 25px;
    }

    /* Styles for the form elements within the generator */
    .generator-content label {
        display: block;
        margin-bottom: 5px;
        color: var(--text-medium);
        font-size: 0.9em;
    }
    .generator-content input[type="text"],
    .generator-content textarea {
        width: 100%;
        padding: 10px;
        border-radius: 5px;
        border: 1px solid var(--border-color);
        background: var(--bg-light);
        color: var(--text-light);
        font-size: 1em;
        margin-bottom: 15px;
    }
     .generator-content textarea {
        background: var(--bg-dark);
        font-family: monospace;
        font-size: 0.9em;
        resize: vertical;
     }
    .generator-content .input-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 15px;
    }
    #generateBtn {
        display: block;
        width: 100%;
        padding: 12px 20px;
        background-color: var(--accent-color);
        color: var(--bg-dark);
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 1.1em;
        font-weight: 700;
        transition: background-color 0.3s ease;
        margin-top: 10px; /* Add some space above button */
    }
    #generateBtn:hover {
        background-color: var(--accent-hover);
    }

    /* Styles for the output area */
    #outputArea {
        margin-top: 30px;
        background: var(--bg-dark);
        padding: 15px; /* Slightly reduced padding */
        border-radius: 8px;
        display: none; /* Initially hidden */
        border: 1px solid var(--bg-light);
        color: var(--text-medium);
    }
    #outputArea h3 {
        color: var(--accent-color);
        margin-bottom: 20px; /* More space below heading */
        font-size: 1.3em;
        padding-bottom: 10px;
        border-bottom: 1px solid var(--border-color); /* Separator below heading */
    }
    #outputArea .output-block {
        margin-bottom: 25px; /* Increased space between blocks */
        padding: 15px; /* Add padding INSIDE each block */
        background-color: rgba(44, 44, 44, 0.3); /* Subtle background for each block */
        border-radius: 5px;
    }
     #outputArea .output-block:last-child {
        margin-bottom: 0;
    }
    #outputArea p {
        margin-bottom: 12px; /* Consistent spacing below paragraphs */
        line-height: 1.6; /* Improved line spacing for readability */
        max-width: 100%; /* Ensure text wraps within its container */
    }
    #outputArea code { /* Inline code style */
        color: var(--text-light);
        background: var(--bg-light);
        padding: 3px 6px;
        border-radius: 3px;
        font-family: monospace;
        font-size: 0.95em; /* Slightly larger inline code */
    }
    #outputArea .code-container { /* Container for code block + copy button */
        display: flex;
        align-items: flex-start;
        gap: 10px;
        background: var(--bg-light);
        padding: 12px; /* More padding around code block */
        border-radius: 5px;
        margin-top: 8px; /* Space between instruction and code block */
        border: 1px solid var(--border-color);
    }
     #outputArea .code-container code, /* Style for file path code */
     #outputArea .code-container pre { /* Style for list item pre tag */
        flex-grow: 1;
        margin: 0;
        padding: 0;
        background: none;
        border: none;
        color: var(--text-light);
        font-family: monospace;
        line-height: 1.5; /* Ensure code line-height is good */
     }
     #outputArea .code-container code#filePathOutput {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        align-self: center; /* Vertically center single-line path */
     }
     #outputArea .code-container pre > code { /* Style code within pre */
        display: block;
        padding: 0; /* Reset padding as container has it */
        white-space: pre-wrap;
        word-wrap: break-word;
        max-height: 250px; /* Allow slightly more height */
        overflow-y: auto;
        font-size: 0.9em;
        background: none;
        border: none;
     }
    .copy-btn {
        padding: 6px 12px;
        background-color: var(--bg-medium);
        color: var(--text-light);
        border: 1px solid var(--border-color);
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.9em;
        transition: background-color 0.2s, color 0.2s;
        white-space: nowrap;
        margin-left: auto;
        flex-shrink: 0;
        align-self: flex-start; /* Align button to top */
    }
    .copy-btn:hover {
        background-color: var(--bg-light);
        border-color: var(--text-medium);
    }
    /* Final note styling */
     #outputArea .final-note {
        font-size: 0.9em;
        text-align: center;
        margin-top: 20px;
        padding-top: 15px;
        border-top: 1px solid var(--border-color);
        color: var(--text-medium);
     }


    /* Rest of your existing styles */
    footer {
      margin-top: auto;
      padding: 25px;
      text-align: center;
      background: rgba(30, 30, 30, 0.8);
      width: 100%;
      box-shadow: 0 -2px 5px var(--shadow-color);
      border-top: 1px solid var(--border-color);
    }

    footer p {
      color: var(--text-medium);
      margin-bottom: 15px;
    }

    .iframe-container {
      position: relative;
      width: 90%;
      max-width: 1200px;
      height: 75vh;
      border: 1px solid var(--border-color);
      margin: 25px auto;
      border-radius: 10px;
      box-shadow: 0 5px 15px var(--shadow-color);
      overflow: hidden;
      transition: all 0.3s ease;
      background-color: var(--bg-dark);
    }

    .iframe-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: transparent;
      cursor: pointer;
      z-index: 1;
      transition: opacity 0.3s;
    }

    .iframe-container iframe {
      width: 100%;
      height: 100%;
      border: none;
      background-color: #ffffff;
    }

    .home-button {
      position: fixed;
      top: 15px;
      left: 15px;
      z-index: 9999;
      display: none;
      background: var(--bg-light);
      border: 1px solid var(--border-color);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      box-shadow: 0 2px 5px var(--shadow-color);
      cursor: pointer;
      font-size: 20px;
      line-height: 38px;
      text-align: center;
      color: var(--text-light);
      transition: transform 0.2s, background-color 0.2s;
    }

    .home-button:hover {
      transform: scale(1.1);
      background-color: var(--bg-medium);
    }

    .iframe-container.fullscreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 9998;
      margin: 0;
      border-radius: 0;
      max-width: none;
      border: none;
      background: var(--bg-dark);
    }

    .iframe-container.fullscreen .iframe-overlay {
      opacity: 0;
      pointer-events: none;
    }

    .full-page-button {
      position: relative;
      background-color: var(--accent-color);
      border: none;
      border-radius: 25px;
      padding: 12px 25px;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      transition: background-color 0.3s, transform 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 1em;
      font-weight: 700;
      color: var(--bg-dark);
    }

    .full-page-button:hover:not(:disabled) {
      background-color: var(--accent-hover);
      transform: scale(1.05);
    }

    .full-page-button:disabled {
      background-color: var(--bg-light);
      color: var(--text-medium);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    .full-page-button span {
        font-size: 1.2em;
    }

    @media (max-width: 768px) {
      header h1 { font-size: 2.2em; }
      header p { font-size: 1em; }
      .app-list { padding: 10px 15px; gap: 15px; }
      .app-link { min-width: 120px; padding: 12px 20px; }
      .iframe-container { height: 65vh; width: 95%; }
      .full-page-button { padding: 10px 20px; font-size: 0.9em; }
      .home-button { width: 35px; height: 35px; font-size: 18px; line-height: 33px; top: 10px; left: 10px;}
      #generator-summary { font-size: 1.3em; padding: 12px 20px;} /* Adjust summary size */
      .generator-content { padding: 20px; } /* Reduce padding slightly */
      .generator-content .input-grid { grid-template-columns: 1fr; } /* Stack inputs */
      #outputArea .output-block { padding: 12px; } /* Reduce output block padding */
      #outputArea .code-container { padding: 10px; }
    }

  </style>
</head>
<body>
  <header>
    <h1>The Library</h1>
    <p>My Personal Project Hub & Toolkit</p>
  </header>

  <nav>
    <ul class="app-list">
      <!-- ADD YOUR APPS HERE -->
      <li>
        <a href="apps/ACR-Contrast-Reaction/index.html" class="app-link">
          <span class="emoji">💉</span>
          <span class="text">ACR Contrast Reaction</span>
        </a>
      </li>
      <li>
        <a href="apps/Radionuclides/index.html" class="app-link">
          <span class="emoji">☢️</span>
          <span class="text">Radionuclides</span>
        </a>
      </li>
      <li>
        <a href="apps/ACLS/index.html" class="app-link">
          <span class="emoji">📊</span>
          <span class="text">ACLS</span>
        </a>
      </li>
      <li>
        <a href="apps/Core-Gynecology-Qs/index.html" class="app-link">
          <span class="emoji">💕</span>
          <span class="text">Gynecology Qs</span>
        </a>
      </li>
      <li>
        <a href="apps/QuizApp/index.html" class="app-link">
          <span class="emoji">🛠📄</span>
          <span class="text">QuizApp</span>
        </a>
      </li>
      <li>
        <a href="apps/Glycolysis/index.html" class="app-link">
          <span class="emoji">🦠</span>
          <span class="text">Glycolysis</span>
        </a>
      </li>
      <li>
        <a href="apps/code-snippets/index.html" class="app-link">
          <span class="emoji">💻</span>
          <span class="text">Code Snippets</span>
        </a>
      </li>
      <li>
        <a href="apps/utility-belt/index.html" class="app-link">
          <span class="emoji">🛠️</span>
          <span class="text">Utility Belt</span>
        </a>
      </li>
      <!-- Add more app links as needed -->

      <!-- ADD NEW APPS ABOVE THIS LINE -->
    </ul>
  </nav>

  <!-- ========= Collapsible App Snippet Generator Start ========= -->
  <details id="generator-details">
      <summary id="generator-summary">Create New App Snippet</summary>
      <div class="generator-content">
          <div class="input-grid">
              <div>
                  <label for="appName">App Name (for link & folder):</label>
                  <input type="text" id="appName" placeholder="My Awesome Tool">
              </div>
              <div>
                  <label for="appEmoji">Emoji (optional):</label>
                  <input type="text" id="appEmoji" placeholder="🚀">
              </div>
          </div>

          <div>
              <label for="appCode">Paste HTML Code for new index.html:</label>
              <textarea id="appCode" rows="12" placeholder="<!DOCTYPE html>
<html lang="en">
<head>..."></textarea>
          </div>

          <button id="generateBtn">Generate Snippets & Instructions</button>

          <div id="outputArea">
              <h3>GitHub Instructions:</h3>

              <div class="output-block">
                  <p>1. Create a new file on GitHub named:</p>
                  <div class="code-container">
                      <code id="filePathOutput"></code>
                      <button class="copy-btn" data-target="filePathOutput" title="Copy File Path">Copy</button>
                  </div>
                   <p style="margin-top: 12px;">2. Paste the HTML code you entered above into this new file and commit it.</p>
              </div>

              <div class="output-block">
                  <p>3. Edit your main <code>index.html</code> file on GitHub.</p>
                  <p>4. Find the line <code><!-- ADD NEW APPS ABOVE THIS LINE --></code> within the <code><ul class="app-list"></code>.</p>
                  <p>5. Paste the following code directly <strong>above</strong> that comment line:</p>
                  <div class="code-container">
                      <pre><code id="listItemOutput"></code></pre>
                      <button class="copy-btn" data-target="listItemOutput" title="Copy List Item HTML">Copy</button>
                  </div>
                   <p style="margin-top: 12px;">6. Commit the changes to <code>index.html</code>.</p>
              </div>
               <p class="final-note">After committing both files, refresh this page. Your new app should appear in the list!</p>
          </div>
      </div>
  </details>
  <!-- ========= Collapsible App Snippet Generator End ========= -->


  <div class="iframe-container">
    <div class="iframe-overlay"></div>
    <iframe id="app-frame" src="" title="Loaded Application Frame"></iframe>
    <!-- Home button for exiting fullscreen iframe -->
    <button class="home-button" title="Exit Fullscreen">🏠</button>
  </div>

  <footer>
    <p>© <script>document.write(new Date().getFullYear())</script> Your Name Here. All rights reserved.</p> <!-- Remember to change Your Name Here -->
    <button id="open-full-page" class="full-page-button" disabled>
      <span>🔗</span> <!-- Link emoji -->
      <span>Open Full Page</span>
    </button>
  </footer>

  <script>
    // ========= Original App Loading and Fullscreen Logic =========
    let currentApp = '';
    const iframeContainer = document.querySelector('.iframe-container');
    const overlay = document.querySelector('.iframe-overlay');
    const homeButton = document.querySelector('.home-button');
    const iframe = document.getElementById('app-frame');
    const fullPageButton = document.getElementById('open-full-page');
    const appLinks = document.querySelectorAll('.app-list .app-link');

    function loadApp(appPath, linkElement) {
      if (typeof appPath !== 'string' || appPath.trim() === '') {
          console.error("Invalid app path provided:", appPath);
          iframe.src = 'about:blank';
          currentApp = '';
          updateFullPageButton();
          appLinks.forEach(link => link.classList.remove('active'));
          return;
      }
      const normalizePath = (path) => {
          try { return new URL(path, window.location.href).pathname; }
          catch (e) { return path.replace(/^\/+|\/+$/g, ''); }
      };
      const normalizedNewPath = normalizePath(appPath);
      const normalizedCurrentPath = iframe.src ? normalizePath(iframe.src) : '';

      if (normalizedCurrentPath === normalizedNewPath && !iframe.src.endsWith('about:blank') && iframe.src !== '') {
          console.log("App already loaded:", normalizedNewPath);
          appLinks.forEach(link => link.classList.remove('active'));
          if (linkElement) { linkElement.classList.add('active'); }
          return;
      }
      console.log("Loading app:", normalizedNewPath);
      iframe.src = appPath;
      currentApp = appPath;
      appLinks.forEach(link => link.classList.remove('active'));
      if (linkElement) { linkElement.classList.add('active'); }
      updateFullPageButton();
      if (iframeContainer.classList.contains('fullscreen')) { exitFullscreen(); }
    }

    function updateFullPageButton() {
      fullPageButton.disabled = !currentApp || currentApp === 'about:blank';
    }

    appLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const appPath = this.getAttribute('href');
        loadApp(appPath, this);
      });
    });

    fullPageButton.addEventListener('click', () => {
      if (currentApp && !fullPageButton.disabled) {
          const fullUrl = new URL(currentApp, window.location.href).href;
          window.open(fullUrl, '_blank');
      }
    });

    overlay.addEventListener('click', () => {
      if (currentApp && currentApp !== 'about:blank') {
        iframeContainer.classList.add('fullscreen');
        document.body.style.overflow = 'hidden';
        homeButton.style.display = 'block';
      }
    });

    function exitFullscreen() {
      iframeContainer.classList.remove('fullscreen');
      document.body.style.overflow = '';
      homeButton.style.display = 'none';
    }

    homeButton.addEventListener('click', (e) => {
      e.preventDefault();
      exitFullscreen();
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && iframeContainer.classList.contains('fullscreen')) {
        exitFullscreen();
      }
    });

    if (appLinks.length > 0) {
       const firstAppLink = appLinks[0];
       const firstAppPath = firstAppLink.getAttribute('href');
       loadApp(firstAppPath, firstAppLink);
    } else {
        iframe.src = 'about:blank';
        updateFullPageButton();
    }
    // ========= End Original App Loading Logic =========


    // ========= App Snippet Generator Script =========
    const generatorDetails = document.getElementById('generator-details'); // Get reference to <details>
    const generateBtn = document.getElementById('generateBtn');
    const appNameInput = document.getElementById('appName');
    const appEmojiInput = document.getElementById('appEmoji');
    const appCodeInput = document.getElementById('appCode');
    const outputArea = document.getElementById('outputArea');
    const filePathOutput = document.getElementById('filePathOutput');
    const listItemOutput = document.getElementById('listItemOutput');
    const copyBtns = document.querySelectorAll('.copy-btn');

    generateBtn.addEventListener('click', () => {
        const appName = appNameInput.value.trim();
        const appCode = appCodeInput.value.trim();
        const appEmoji = appEmojiInput.value.trim() || '📄';

        if (!appName) {
            alert('Please enter an App Name.');
            appNameInput.focus();
            return;
        }
        if (!appCode) {
            alert('Please paste the HTML code for the new app.');
            appCodeInput.focus();
            return;
        }

        const folderName = appName
            .toLowerCase()
            .replace(/\s+/g, '-')
            .replace(/[^\w-]+/g, '')
            .replace(/--+/g, '-')
            .replace(/^-+/, '')
            .replace(/-+$/, '');

        if (!folderName) {
             alert('Could not generate a valid folder name from the App Name. Please use more standard characters.');
             appNameInput.focus();
            return;
        }

        const filePath = `apps/${folderName}/index.html`;
        const listItemHTML = `
      <li>
        <a href="${filePath}" class="app-link">
          <span class="emoji">${appEmoji}</span>
          <span class="text">${appName}</span>
        </a>
      </li>`;

        filePathOutput.textContent = filePath;
        listItemOutput.textContent = listItemHTML.trim();

        outputArea.style.display = 'block'; // Show the results

        // Ensure the details section is open before scrolling
        generatorDetails.open = true;

        // Scroll to the output area smoothly
        outputArea.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    });

    // --- Copy Button Logic ---
    copyBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            const targetId = btn.getAttribute('data-target');
            const targetElement = document.getElementById(targetId);
            if (targetElement) {
                const textToCopy = targetElement.textContent;
                navigator.clipboard.writeText(textToCopy).then(() => {
                    const originalText = btn.textContent;
                    btn.textContent = 'Copied!';
                    btn.style.backgroundColor = '#28a745';
                    btn.style.color = '#ffffff';
                    btn.disabled = true;
                    setTimeout(() => {
                        btn.textContent = originalText;
                        btn.style.backgroundColor = '';
                        btn.style.color = '';
                        btn.disabled = false;
                    }, 1500);
                }).catch(err => {
                    console.error('Failed to copy text: ', err);
                    const originalText = btn.textContent;
                    btn.textContent = 'Error';
                    btn.style.backgroundColor = '#dc3545';
                    btn.style.color = '#ffffff';
                     btn.disabled = true;
                     setTimeout(() => {
                        btn.textContent = originalText;
                        btn.style.backgroundColor = '';
                        btn.style.color = '';
                        btn.disabled = false;
                    }, 2000);
                });
            }
        });
    });
    // ========= End App Snippet Generator Script =========

  </script>
</body>
</html>