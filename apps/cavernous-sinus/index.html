<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cavernous Sinus Lesions Quiz</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400&display=swap" rel="stylesheet">
    <style>
        /* CSS rules (mostly unchanged) */
        body {
            background-color: #12121f;
            color: #e0e0fc;
            font-family: 'Roboto', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
.quiz-container {
        background-color: #1a1a2e;
        padding: 30px 40px;
        border-radius: 15px;
        box-shadow: 0 0 25px rgba(74, 74, 245, 0.4),
                    0 5px 15px rgba(0, 0, 0, 0.3);
        width: 90%;
        max-width: 800px;
        text-align: center;
        border: 1px solid #3a3a5e;
        display: flex; /* Use flexbox for vertical layout */
        flex-direction: column;
        justify-content: space-between; /* Pushes nav buttons down */
        min-height: 500px; /* Ensure minimum height */
    }

    .quiz-content {
         flex-grow: 1; /* Allow content to take available space */
         margin-bottom: 20px; /* Space above navigation buttons */
    }


    h1 {
        font-family: 'Orbitron', sans-serif;
        color: #8a8aff;
        margin-bottom: 25px;
        text-shadow: 0 0 8px rgba(138, 138, 255, 0.5);
    }

    #question-counter {
        font-size: 0.9em;
        color: #aaaafc;
        margin-bottom: 15px;
    }

    #question-text {
        font-size: 1.3em;
        color: #f0f0ff;
        margin-bottom: 30px;
        line-height: 1.6;
        min-height: 60px;
    }

    .options-container {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-bottom: 30px;
    }

    .option-button {
        background-color: #2a2a4e;
        color: #d0d0fc;
        border: 1px solid #4a4a7e;
        padding: 12px 15px;
        font-size: 1em;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.1s ease, box-shadow 0.3s ease;
        text-align: left;
        width: 100%;
        box-sizing: border-box;
    }

    .option-button:hover:not(:disabled) {
        background-color: #3a3a6e;
        transform: translateY(-2px);
        box-shadow: 0 0 12px rgba(74, 74, 245, 0.3);
    }

    .option-button:active:not(:disabled) {
        transform: translateY(0px);
    }

    .option-button:disabled {
        cursor: not-allowed;
        opacity: 0.7;
    }

    .option-button.correct {
        background-color: #1f7a3f;
        border-color: #28a745;
        color: #ffffff;
        box-shadow: 0 0 15px rgba(40, 167, 69, 0.6);
        opacity: 1;
    }

    .option-button.incorrect {
        background-color: #9a2532;
        border-color: #dc3545;
        color: #ffffff;
        box-shadow: 0 0 15px rgba(220, 53, 69, 0.6);
        opacity: 1;
    }

    .option-button.reveal-correct {
        background-color: #1f7a3f !important;
        border-color: #28a745 !important;
        color: #ffffff !important;
        box-shadow: 0 0 15px rgba(40, 167, 69, 0.6) !important;
        opacity: 1 !important;
    }


    .explanation-container {
        background-color: #202035;
        border: 1px solid #3a3a5e;
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
        text-align: left;
        font-size: 0.95em;
        line-height: 1.5;
        color: #c0c0fa;
        box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);
    }

    .explanation-container strong {
        color: #8a8aff;
    }

    /* --- Navigation Button Styling --- */
    .navigation-buttons {
        display: flex;
        justify-content: space-between; /* Space out Prev/Next */
        align-items: center;
        margin-top: 30px; /* Keep margin from content above */
        width: 100%; /* Ensure full width */
    }

    .nav-button { /* Common style for Prev/Next */
        background: linear-gradient(45deg, #4a4af5, #8a8aff);
        color: white;
        border: none;
        padding: 12px 30px;
        font-size: 1.1em;
        font-family: 'Orbitron', sans-serif;
        border-radius: 25px; /* Pill shape */
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.3s ease, background 0.3s ease;
        box-shadow: 0 4px 10px rgba(74, 74, 245, 0.3);
        min-width: 120px; /* Give buttons minimum width */
        text-align: center;
    }

    .nav-button:hover:not(:disabled) {
        transform: scale(1.05);
        box-shadow: 0 6px 15px rgba(74, 74, 245, 0.5);
    }

    .nav-button:disabled {
        background: #5a5a7e; /* Different background when disabled */
        cursor: not-allowed;
        opacity: 0.6;
        box-shadow: none;
        transform: none;
    }
    /* --- End Navigation Button Styling --- */


    #completion-message {
        margin-top: 40px;
         flex-grow: 1; /* Allow it to take space when visible */
         display: flex;
         flex-direction: column;
         justify-content: center;
         align-items: center;
    }
    #completion-message h2 {
         font-family: 'Orbitron', sans-serif;
         color: #28a745;
         text-shadow: 0 0 8px rgba(40, 167, 69, 0.5);
    }

    /* Responsive adjustments */
    @media (max-width: 600px) {
        .quiz-container {
            padding: 20px;
            width: 95%;
            min-height: 400px;
        }
        h1 {
            font-size: 1.5em;
        }
        #question-text {
            font-size: 1.1em;
        }
        .option-button {
            font-size: 0.9em;
            padding: 10px 12px;
        }
        .nav-button {
            padding: 10px 20px;
            font-size: 1em;
            min-width: 100px;
        }
    }
</style>
</head>
<body>
    <div class="quiz-container">
        <!-- Content Area -->
        <div class="quiz-content">
            <h1>Cavernous Sinus Lesions Quiz</h1>
            <div id="question-counter"></div>
            <div id="question-text">Loading question...</div>
            <div id="answer-options" class="options-container">
                <!-- Answer buttons will be loaded here -->
            </div>
            <div id="explanation" class="explanation-container" style="display: none;">
                <!-- Explanation will be loaded here -->
            </div>
        </div>
        <!-- Completion Message (Initially Hidden) -->
        <div id="completion-message" style="display: none;">
            <h2>Quiz Complete!</h2>
            <p>You have finished all the questions.</p>
        </div>

        <!-- Navigation Buttons Area -->
        <div class="navigation-buttons">
            <button id="prev-button" class="nav-button">Previous</button>
            <button id="next-button" class="nav-button">Next</button>
        </div>
    </div>

<script>
    const quizData = [
        {
            question: "Which cranial nerve travels WITHIN the main cavity of the cavernous sinus, in close relation to the internal carotid artery (ICA)?",
            options: ["Oculomotor nerve (CN III)", "Trochlear nerve (CN IV)", "Abducens nerve (CN VI)", "Ophthalmic nerve (CN V1)"],
            correctAnswer: "Abducens nerve (CN VI)",
            explanation: "The text states the ICA and the abducens nerve (CN VI) travel within the cavity of the cavernous sinus, while CN III, CN IV, and CN V1 travel in the lateral wall."
        },
        {
            question: "Anatomically, the medial wall of the cavernous sinus, which separates it from the pituitary gland superiorly and sphenoid sinus inferiorly, is primarily composed of:",
            options: ["Two distinct dural layers", "A single layer of dura mater", "A thick layer of adipose tissue", "Arachnoid membrane only"],
            correctAnswer: "A single layer of dura mater",
            explanation: "Figure 1 and the text state that the medial wall consists of only a single dural layer, making it the weakest wall and susceptible to invasion, unlike the other walls which consist of two dural layers."
        },
        {
            question: "According to the classification in Figure 5, Tolosa-Hunt syndrome, a condition causing painful ophthalmoplegia, belongs to which category of cavernous sinus lesions?",
            options: ["Infective Inflammatory", "Noninfective Inflammatory", "Vascular", "Neoplastic (intrinsic)"],
            correctAnswer: "Noninfective Inflammatory",
            explanation: "Figure 5 clearly categorizes Tolosa-Hunt syndrome under Noninfective Inflammatory conditions, alongside Sarcoidosis, IgG4 Disease, and Granulomatosis with polyangiitis."
        },
        {
            question: "A key imaging feature that helps differentiate a cavernous sinus meningioma from a cavernous hemangioma is:",
            options: ["Presence of T2 hyperintensity within the lesion", "Homogeneous contrast enhancement", "Narrowing of the encased internal carotid artery (ICA)", "Location adjacent to the dura"],
            correctAnswer: "Narrowing of the encased internal carotid artery (ICA)",
            explanation: "The text mentions that meningiomas encasing the cavernous ICA tend to cause luminal narrowing (Fig 6a), whereas cavernous hemangiomas usually do not cause ICA narrowing."
        },
        {
            question: "A benign nerve sheath tumor, most commonly arising from the trigeminal nerve within the cavernous sinus and often appearing heterogeneously hyperintense on T2-weighted MRI with cystic changes, is characteristic of a:",
            options: ["Meningioma", "Schwannoma", "Cavernous hemangioma", "Pituitary adenoma"],
            correctAnswer: "Schwannoma",
            explanation: "The description matches that of a schwannoma (page 801). They arise from Schwann cells (nerve sheath), commonly from CN V, and typically show heterogeneous T2 hyperintensity and enhancement, often with cystic areas (Fig 7)."
        },
        {
            question: "Which imaging finding is considered highly specific for diagnosing a cavernous hemangioma of the cavernous sinus?",
            options: ["Marked T2 hyperintensity", "Progressive 'fill-in' enhancement on dynamic MRI", "Accumulation of tracer on a 99mTc-pertechnetate-labeled red blood cell scan", "Presence of a dural tail sign"],
            correctAnswer: "Accumulation of tracer on a 99mTc-pertechnetate-labeled red blood cell scan",
            explanation: "While T2 hyperintensity and fill-in enhancement are characteristic (Fig 8), the text states that scintigraphic imaging showing tracer accumulation is said to be specific for cavernous hemangioma (page 803)."
        },
        {
            question: "Which criterion, involving lines drawn tangential to the ICA, is used in the Knosp classification to assess cavernous sinus invasion by a pituitary adenoma?",
            options: ["Percentage of ICA circumference contacted by the tumor", "Degree of ICA narrowing", "Relationship of the tumor margin to medial, median, and lateral intercarotid lines", "Enhancement pattern of the tumor invading the sinus"],
            correctAnswer: "Relationship of the tumor margin to medial, median, and lateral intercarotid lines",
            explanation: "The text describes the Knosp classification using medial, median, and lateral intercarotid lines to classify pituitary adenomas invading the cavernous sinus (page 805, Fig E3)."
        },
        {
            question: "An abnormal communication between the carotid artery system and the cavernous sinus, often presenting with pulsatile exophthalmos and diagnosed definitively with angiography, is known as a:",
            options: ["Cavernous sinus thrombosis", "Cavernous ICA aneurysm", "Carotid-Cavernous Fistula (CCF)", "Cavernous hemangioma"],
            correctAnswer: "Carotid-Cavernous Fistula (CCF)",
            explanation: "This clinical and diagnostic description perfectly matches a Carotid-Cavernous Fistula (CCF), as outlined on page 810 (Fig 14)."
        },
        {
            question: "In the acute stage of cavernous sinus thrombosis, which MRI finding can be particularly helpful by demonstrating restricted diffusion within the thrombosed sinus?",
            options: ["T1 hyperintensity", "T2 hypointensity", "Homogeneous enhancement", "Diffusion restriction on DWI"],
            correctAnswer: "Diffusion restriction on DWI",
            explanation: "The text mentions that diffusion-weighted MRI can be especially useful in acute thrombosis and can demonstrate diffusion restriction within the sinus itself (page 810, Fig E8)."
        },
        {
            question: "In an immunocompromised patient with acute invasive fungal sinusitis involving the cavernous sinus, the MRI finding of a nonenhancing T2-hypointense structure within the nasal cavity is referred to as the:",
            options: ["Dural tail sign", "Target sign", "Black turbinate sign", "Empty delta sign"],
            correctAnswer: "Black turbinate sign",
            explanation: "The text describes this finding in acute invasive fungal infection, where infarcted tissue (like a nasal turbinate) characteristically has a nonenhancing T2-hypointense nature, termed the 'black turbinate sign' (page 811, Fig 16)."
        },
        {
            question: "Compared to many neoplasms, chronic inflammatory conditions involving the cavernous sinus (like sarcoidosis or IgG4-related disease) often demonstrate which characteristic signal intensity on T2-weighted MRI?",
            options: ["Marked hyperintensity", "Isointensity to CSF", "Hypointensity", "Fat signal intensity"],
            correctAnswer: "Hypointensity",
            explanation: "The text notes that inflammatory conditions often show T2 hypointensity (page 811, Figs E7, E10, E11, 17). While some neoplasms like lymphoma can also be T2 hypointense, this is a common feature pointing towards inflammation."
        },
        {
            question: "A congenital cystic lesion in the parasellar region demonstrating signal intensity similar to CSF on all sequences, but with restricted diffusion and lack of enhancement, is most characteristic of:",
            options: ["Arachnoid cyst", "Epidermoid cyst", "Dermoid cyst", "CSF pseudocyst"],
            correctAnswer: "Epidermoid cyst",
            explanation: "The combination of CSF-like signal, diffusion restriction (unlike arachnoid cyst or pseudocyst), and no enhancement is characteristic of an epidermoid cyst (page 814, Fig 18)."
        },
        {
            question: "Perineural spread along cranial nerves is a well-known characteristic route of invasion to the cavernous sinus for which type of malignancy?",
            options: ["Nasopharyngeal carcinoma", "Adenoid cystic carcinoma", "Chondrosarcoma", "Pituitary adenoma"],
            correctAnswer: "Adenoid cystic carcinoma",
            explanation: "The text specifically highlights the marked propensity of adenoid cystic carcinoma for perineural spread (page 807, Fig E5). While other tumors can spread perineurally, it's particularly characteristic of ACC."
        },
        {
            question: "A T2-hyperintense tumor located in the midline skull base, arising from the clivus and causing lytic bone destruction, is most likely a:",
            options: ["Chondrosarcoma", "Chordoma", "Pituitary macroadenoma", "Meningioma"],
            correctAnswer: "Chordoma",
            explanation: "Chordomas characteristically arise from notochordal remnants in the clivus (midline), show T2 hyperintensity due to physaliferous cells, and cause lytic destruction (page 806)."
        },
        {
            question: "On early arterial-phase CT angiography, what finding can mimic cavernous sinus thrombosis due to the sinuses normally filling later than arteries and some other dural sinuses?",
            options: ["Homogeneous dense opacification", "Enlargement of the superior ophthalmic vein", "Incomplete contrast opacification of the cavernous sinus", "Erosion of the adjacent sphenoid bone"],
            correctAnswer: "Incomplete contrast opacification of the cavernous sinus",
            explanation: "The text explicitly warns that first-pass CTA images often show inadequate or partial opacification of the cavernous sinus, which can mimic thrombosis. Delayed imaging (at least 45 seconds post-injection) is required to rule out filling defects reliably (page 816, Fig E14)."
        },
        {
            question: "Which structure courses just inferior to the junction point where the lateral and medial dural walls of the cavernous sinus merge?",
            options: ["Abducens nerve (CN VI)", "Internal carotid artery (ICA)", "Maxillary nerve (CN V2)", "Ophthalmic nerve (CN V1)"],
            correctAnswer: "Maxillary nerve (CN V2)",
            explanation: "The text describes the maxillary division of the trigeminal nerve (CN V2) lying just inferior to the junction of the lateral and medial wall dura (page 798, Fig 1)."
        },
        {
            question: "Compared to a typical meningioma, a Solitary Fibrous Tumor/Hemangiopericytoma involving the cavernous sinus region is more likely to demonstrate which feature?",
            options: ["Hyperostosis of adjacent bone", "Prominent calcification", "A broad dural base", "Erosion of adjacent bone and associated flow voids"],
            correctAnswer: "Erosion of adjacent bone and associated flow voids",
            explanation: "The text contrasts SFT/HPC with meningioma, stating that clues for SFT/HPC include a narrow base, erosion of adjacent bone, and associated flow voids, whereas meningiomas often have a broad base and cause hyperostosis (page 803, Fig E2)."
        },
        {
            question: "Which imaging feature is particularly characteristic of lymphoma involving the cavernous sinus, helping differentiate it from some inflammatory conditions that may also appear T2-hypointense?",
            options: ["Bone destruction", "Perineural spread", "Diffusion restriction", "Presence of calcification"],
            correctAnswer: "Diffusion restriction",
            explanation: "Lymphomatous lesions are typically highly cellular, resulting in restricted diffusion on DWI. This feature (seen in Fig 12b, c) helps distinguish it from many inflammatory processes or less cellular tumors (page 808)."
        }
    ];


    // --- DOM Element References ---
    const questionCounterElement = document.getElementById('question-counter');
    const questionTextElement = document.getElementById('question-text');
    const answerOptionsElement = document.getElementById('answer-options');
    const explanationElement = document.getElementById('explanation');
    const prevButton = document.getElementById('prev-button'); // Added
    const nextButton = document.getElementById('next-button'); // Now used for navigation
    const completionMessageElement = document.getElementById('completion-message');
    const quizContentElement = document.querySelector('.quiz-content'); // Added
    const navigationButtonsElement = document.querySelector('.navigation-buttons'); // Added

    // --- State Variables ---
    let currentQuestionIndex = 0;
    let score = 0; // Optional score tracking
    let userAnswers = new Array(quizData.length).fill(null); // Store user selections

    // --- Functions ---

    function loadQuestion() {
        // Check if quiz is finished *before* trying to load
         if (currentQuestionIndex >= quizData.length) {
            showCompletion();
            return;
        }
        // Ensure quiz content is visible and completion is hidden
        quizContentElement.style.display = 'block';
        navigationButtonsElement.style.display = 'flex'; // Make sure nav buttons are visible
        completionMessageElement.style.display = 'none';


        // Reset styles and visibility for the new question
        explanationElement.style.display = 'none';
        explanationElement.innerHTML = '';
        answerOptionsElement.innerHTML = ''; // Clear previous options

        // Get current question data
        const currentQuestion = quizData[currentQuestionIndex];

        // Update question text and counter
        questionCounterElement.textContent = `Question ${currentQuestionIndex + 1} of ${quizData.length}`;
        questionTextElement.textContent = currentQuestion.question;

        // Create and append answer buttons
        currentQuestion.options.forEach(option => {
            const button = document.createElement('button');
            button.textContent = option;
            button.classList.add('option-button');
            // Re-apply styles if the user previously answered this question
            if (userAnswers[currentQuestionIndex] !== null) {
                 button.disabled = true; // Disable options if already answered
                 if (option === userAnswers[currentQuestionIndex].selected) {
                     button.classList.add(userAnswers[currentQuestionIndex].isCorrect ? 'correct' : 'incorrect');
                 }
                 if (option === currentQuestion.correctAnswer && !userAnswers[currentQuestionIndex].isCorrect) {
                    button.classList.add('reveal-correct'); // Highlight correct if wrong answer was chosen
                 }
            } else {
                 button.addEventListener('click', selectAnswer); // Only add listener if not answered
            }
            answerOptionsElement.appendChild(button);
        });

         // Show explanation immediately if already answered
         if (userAnswers[currentQuestionIndex] !== null) {
            explanationElement.innerHTML = `<strong>Explanation:</strong> ${currentQuestion.explanation}`;
            explanationElement.style.display = 'block';
        }


        // Update navigation button states
        updateNavButtonStates();
    }

    function updateNavButtonStates() {
        prevButton.disabled = (currentQuestionIndex === 0);
        // Disable next button only if on the last question *index*
        // Allow navigation to completion screen via next button on last question
        nextButton.disabled = false; // (currentQuestionIndex === quizData.length); // Always enable next initially
        if (currentQuestionIndex === quizData.length -1) {
            nextButton.textContent = "Finish"; // Change text on last question
        } else {
             nextButton.textContent = "Next";
        }

    }

    function selectAnswer(event) {
        const selectedButton = event.target;
        const selectedAnswer = selectedButton.textContent;
        const currentQuestion = quizData[currentQuestionIndex];
        const correctAnswer = currentQuestion.correctAnswer;

        // Disable all *option* buttons only
        const optionButtons = answerOptionsElement.querySelectorAll('.option-button');
        let alreadyAnswered = false;
        optionButtons.forEach(btn => {
            if (btn.disabled) { // Check if any button is already disabled (means answered)
                alreadyAnswered = true;
            }
        });

         // Only process the answer if it hasn't been answered yet for this load
         if (alreadyAnswered) return;


        optionButtons.forEach(button => {
            button.disabled = true; // Disable options after selection
        });

        const isCorrect = selectedAnswer === correctAnswer;

        // Store the user's answer
        userAnswers[currentQuestionIndex] = {
            selected: selectedAnswer,
            isCorrect: isCorrect
        };

        // Check if the answer is correct
        if (isCorrect) {
            selectedButton.classList.add('correct');
            score++; // Optional score tracking
        } else {
            selectedButton.classList.add('incorrect');
            // Highlight the correct answer as well
            optionButtons.forEach(button => {
                if (button.textContent === correctAnswer) {
                    button.classList.add('reveal-correct');
                }
            });
        }

        // Show explanation
        explanationElement.innerHTML = `<strong>Explanation:</strong> ${currentQuestion.explanation}`;
        explanationElement.style.display = 'block';

        // Keep nav buttons enabled - user can navigate away after seeing explanation
    }

    function goToNextQuestion() {
        if (currentQuestionIndex < quizData.length - 1) {
            currentQuestionIndex++;
            loadQuestion();
        }
         // If on the last question, the next click goes to completion
        else if (currentQuestionIndex === quizData.length - 1) {
             currentQuestionIndex++; // Increment index one last time to trigger completion check
             loadQuestion(); // This will call showCompletion()
        }
    }

    function goToPreviousQuestion() {
        if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            loadQuestion();
        }
    }


    function showCompletion() {
        quizContentElement.style.display = 'none'; // Hide questions/options/explanation
        navigationButtonsElement.style.display = 'none'; // Hide nav buttons
        completionMessageElement.style.display = 'flex'; // Show completion message (use flex for centering)
        // Optional: Display score
        // Find the score based on stored answers
        let correctCount = userAnswers.filter(answer => answer && answer.isCorrect).length;
        completionMessageElement.innerHTML = `<h2>Quiz Complete!</h2> <p>You answered ${correctCount} out of ${quizData.length} questions correctly.</p>`;
    }


    // --- Event Listeners ---
    prevButton.addEventListener('click', goToPreviousQuestion);
    nextButton.addEventListener('click', goToNextQuestion);


    // --- Initial Load ---
    loadQuestion(); // Load the first question
</script>
</body>
</html>