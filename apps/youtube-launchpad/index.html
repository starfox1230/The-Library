<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>YT LaunchPad</title>

  <!-- PWA Meta Tags for iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="YT LaunchPad">
  <meta name="theme-color" content="#1c1c1e"> <!-- Dark mode theme color, also used by manifest -->

  <!-- Embedded SVG Icons as Data URLs -->
  <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180' fill='%23FFF'%3E%3Crect width='180' height='180' rx='40' fill='%23FF0000'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial, sans-serif' font-size='80' font-weight='bold' fill='%23FFFFFF'%3EYT%3C/text%3E%3C/svg%3E">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32' fill='%23FFF'%3E%3Crect width='32' height='32' rx='8' fill='%23FF0000'/%3E%3Ctext x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial, sans-serif' font-size='14' font-weight='bold' fill='%23FFFFFF'%3EYT%3C/text%3E%3C/svg%3E">

  <style>
    :root {
      /* Light Mode (Default - can be expanded later if full light mode is desired) */
      --bg-primary: #f0f0f0;
      --bg-secondary: #ffffff;
      --bg-tertiary: #e9e9e9;
      --text-primary: #1c1c1e;
      --text-secondary: #3c3c3e;
      --accent-color: #007aff; /* Apple Blue */
      --link-bg: #e0e0e0;
      --link-bg-hover: #d0d0d0;
      --shadow-light: rgba(255, 255, 255, 0.7);
      --shadow-dark: rgba(0, 0, 0, 0.15);
      --glass-bg: rgba(255, 255, 255, 0.6);
      --glass-border: rgba(255, 255, 255, 0.8);
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg-primary: #000000; /* True black for OLED */
        --bg-secondary: #1c1c1e; /* Apple Dark Grey */
        --bg-tertiary: #2c2c2e; /* Apple Darker Grey */
        --text-primary: #ffffff;
        --text-secondary: #8e8e93; /* Apple Grey for secondary text */
        --accent-color: #0a84ff; /* Apple Blue (Dark Mode) */
        --link-bg: #2c2c2e;
        --link-bg-hover: #3a3a3c;
        --shadow-light: rgba(255, 255, 255, 0.1); /* More subtle for dark mode */
        --shadow-dark: rgba(0, 0, 0, 0.4);
        --glass-bg: rgba(28, 28, 30, 0.75); /* Dark glass */
        --glass-border: rgba(60, 60, 62, 0.5); /* Subtle border for dark glass */
      }
    }

    /* Container & Layout */
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      min-height: -webkit-fill-available; /* For iOS Safari to fill viewport */
      font-size: 17px; /* iOS typical base font size */
      line-height: 1.45;
      -webkit-tap-highlight-color: rgba(0,0,0,0.05);
      padding-top: env(safe-area-inset-top); /* Account for iPhone notch */
      padding-bottom: env(safe-area-inset-bottom);
      padding-left: env(safe-area-inset-left);
      padding-right: env(safe-area-inset-right);
    }
    html {
      height: -webkit-fill-available; /* Make sure html fills available height */
    }

    header {
      padding: 1rem;
      text-align: center;
      font-size: 1.4rem; /* ~20pt */
      font-weight: 600;
      background: var(--bg-secondary);
      color: var(--text-primary);
      border-bottom: 1px solid var(--glass-border);
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 10;
       padding-top: calc(1rem + env(safe-area-inset-top)); /* Adjust header padding for notch */
    }

    .top-links {
      display: flex;
      justify-content: center;
      gap: 0.75rem; /* Slightly reduced gap */
      background: var(--bg-secondary);
      padding: 0.75rem 1rem;
      border-bottom: 1px solid var(--glass-border);
    }

    .top-links a, nav a { /* Combined common styles for neumorphic touch */
      text-decoration: none;
      color: var(--accent-color);
      background: var(--link-bg);
      padding: 0.8rem 1.2rem; /* ~44pt touch target with padding */
      border-radius: 12px; /* Softer radius */
      font-weight: 500;
      transition: all 0.2s ease-out;
      box-shadow:
        -3px -3px 7px var(--shadow-light),
         3px  3px 5px var(--shadow-dark);
    }

    .top-links a:hover, nav a:hover,
    .top-links a:active, nav a:active {
      background: var(--link-bg-hover);
      box-shadow:
        inset -2px -2px 5px var(--shadow-light),
        inset  2px  2px 4px var(--shadow-dark);
      transform: translateY(1px); /* Subtle press effect */
      color: var(--accent-color); /* Keep accent color on active */
    }
    .top-links a {
      white-space: nowrap;
    }


    nav {
      flex: 1;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    details {
      background: var(--glass-bg);
      backdrop-filter: blur(12px) saturate(180%);
      -webkit-backdrop-filter: blur(12px) saturate(180%);
      border-radius: 16px; /* More iOS-like rounded corners */
      border: 1px solid var(--glass-border);
      padding: 0; /* Padding will be on summary and .links */
      transition: box-shadow 0.2s ease-out;
      overflow: hidden; /* Important for border-radius on children */
    }
    details:focus-within { /* Highlight when summary is focused */
        box-shadow: 0 0 0 2px var(--accent-color);
    }

    details[open] {
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }

    summary {
      cursor: pointer;
      padding: 1rem 1.2rem; /* Ample touch target */
      font-weight: 600;
      font-size: 1.1rem;
      list-style: none;
      position: relative;
      color: var(--text-primary);
      transition: background-color 0.2s ease-out;
    }
    summary:hover {
        background-color: rgba(255,255,255,0.05); /* Subtle hover for dark mode */
    }
    @media (prefers-color-scheme: light) {
        summary:hover {
            background-color: rgba(0,0,0,0.03);
        }
    }

    summary::-webkit-details-marker {
      display: none;
    }
    summary::before { /* Custom chevron */
      content: '›';
      font-size: 1.5em;
      font-weight: bold;
      color: var(--text-secondary);
      position: absolute;
      right: 1.2rem;
      top: 50%;
      transform: translateY(-50%) rotate(0deg);
      transition: transform 0.25s cubic-bezier(0.25, 0.1, 0.25, 1);
    }
    details[open] > summary::before {
      transform: translateY(-50%) rotate(90deg);
    }

    .links {
      padding: 0 1.2rem 1.2rem 1.2rem; /* Padding inside the details, below summary */
      margin-top: 0; /* Removed default margin */
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    /* General a style for non-button links if any; nav a takes precedence */
    a {
      color: var(--accent-color);
      text-decoration: none;
    }
    nav a { /* Specifics for nav links (already combined with .top-links a for neumorphism) */
      display: block;
      /* padding, border-radius, background already set from combined rule */
    }

  </style>
</head>
<body>

  <header>YT LaunchPad</header>

  <div class="top-links">
    <a href="https://yt2anki.onrender.com/" target="_blank">YouTube → Anki</a>
    <a href="https://starfox1230.github.io/The-Library/apps/quiz-generator/index.html" target="_blank">Quiz Generator</a>
  </div>

  <nav>
    <!-- Come Follow Me -->
    <details>
      <summary>Come Follow Me</summary>
      <div class="links">
        <a href="youtube://playlist?list=PLhfh21X9suLekBXC8CBIQEysfrjee9ivY">Church History Matters (Playlist)</a>
        <a href="youtube://@FollowHimPodcast">FollowHim Podcast</a>
      </div>
    </details>

    <!-- Radiology -->
    <details>
      <summary>Radiology</summary>
      <div class="links">
        <a href="youtube://@radiologytutorials">Radiology Tutorials</a>
        <a href="youtube://playlist?list=PLWfaNqiSdtzWWsrEEFlfIHs1EezyBTnOh">Ultrasound Physics Course</a>
        <a href="youtube://playlist?list=PLWfaNqiSdtzUq9aIY24DezXppHBq0Ch2C">X-Ray Physics Course</a>
        <a href="youtube://@theneuroradiologist">The Neuroradiologist</a>
        <a href="youtube://@NeuroradishNeuroradiologyActually">Neuroradish</a>
      </div>
    </details>

    <!-- Edutainment -->
    <details>
      <summary>Edutainment</summary>
      <div class="links">
        <details>
          <summary>Science</summary>
          <div class="links">
            <a href="youtube://@kurzgesagt">Kurzgesagt – In a Nutshell</a>
            <a href="youtube://@realscience">Real Science</a>
            <a href="youtube://@veritasium">Veritasium</a>
          </div>
        </details>
        <details>
          <summary>Engineering</summary>
          <div class="links">
            <a href="youtube://@RealEngineering">Real Engineering</a>
            <a href="youtube://@PracticalEngineeringChannel">Practical Engineering</a>
          </div>
        </details>
        <details>
          <summary>Social Sciences & Culture</summary>
          <div class="links">
            <a href="youtube://@GeographyNow">Geography Now</a>
            <a href="youtube://@CharismaonCommand">Charisma on Command</a>
            <a href="youtube://@crashcourse">CrashCourse (Main)</a>
          </div>
        </details>
        <details>
          <summary>Economics</summary>
          <div class="links">
            <a href="youtube://playlist?list=PL8dPuuaLjXtPNZwz5_o_5uirJ8gQXnhEO">CrashCourse Economics</a>
          </div>
        </details>
        <details>
          <summary>Kids & Youth</summary>
          <div class="links">
            <a href="youtube://@CrashCourseKids">CrashCourse Kids</a>
          </div>
        </details>
      </div>
    </details>
  </nav>

  <script>
    // Accordion Logic
    document.querySelectorAll('details').forEach(currentDetail => {
      currentDetail.addEventListener('toggle', function() {
        if (this.open) {
          const parentContainer = this.parentNode;
          let groupSelector = null;
          if (parentContainer.tagName === 'NAV' || (parentContainer.classList && parentContainer.classList.contains('links'))) {
            groupSelector = ':scope > details';
          }

          if (groupSelector) {
            const detailsInGroup = parentContainer.querySelectorAll(groupSelector);
            detailsInGroup.forEach(detailElement => {
              if (detailElement !== this) {
                detailElement.open = false;
              }
            });
          }
        }
      });
    });

    // PWA Service Worker Registration and inline worker
    if ('serviceWorker' in navigator) {
      const swContent = `
        const CACHE_NAME = 'yt-launchpad-cache-v1.5'; // Incremented version for link updates
        const urlsToCache = [
          self.location.pathname // Cache the HTML file itself
        ];

        self.addEventListener('install', event => {
          event.waitUntil(
            caches.open(CACHE_NAME)
              .then(cache => {
                console.log('Opened cache: ' + CACHE_NAME);
                return cache.addAll(urlsToCache);
              })
              .catch(err => {
                console.error('Failed to cache during install:', err, urlsToCache);
              })
          );
          self.skipWaiting(); // Activate new SW immediately
        });

        self.addEventListener('fetch', event => {
          if (event.request.mode === 'navigate') {
            event.respondWith(
              caches.match(event.request)
                .then(response => {
                  if (response) {
                    console.log('Serving from cache:', event.request.url);
                    return response;
                  }
                  console.log('Fetching from network:', event.request.url);
                  return fetch(event.request)
                    .then(networkResponse => {
                        if (event.request.url === self.location.origin + self.location.pathname) {
                            let responseToCache = networkResponse.clone();
                            caches.open(CACHE_NAME)
                                .then(cache => {
                                    cache.put(event.request, responseToCache);
                                });
                        }
                        return networkResponse;
                    })
                    .catch(error => {
                        console.error('Fetch failed for navigation request.', error);
                        // Fallback to cache if network fails, for true offline first
                        return caches.match(self.location.pathname);
                    });
                })
            );
          } else {
            // For non-navigation requests (e.g. external links, API calls), just fetch.
            event.respondWith(fetch(event.request).catch(() => { /* Handle fetch errors for non-nav if needed */ }));
          }
        });

        self.addEventListener('activate', event => {
          const cacheWhitelist = [CACHE_NAME];
          event.waitUntil(
            caches.keys().then(cacheNames => {
              return Promise.all(
                cacheNames.map(cacheName => {
                  if (cacheWhitelist.indexOf(cacheName) === -1) {
                    console.log('Deleting old cache:', cacheName);
                    return caches.delete(cacheName);
                  }
                })
              );
            }).then(() => self.clients.claim()) // Ensure new SW takes control immediately
          );
        });
      `;

      try {
        const blob = new Blob([swContent], { type: 'application/javascript' });
        const swURL = URL.createObjectURL(blob);

        window.addEventListener('load', () => {
          navigator.serviceWorker.register(swURL)
            .then(registration => {
              console.log('ServiceWorker registration successful with scope: ', registration.scope);
            })
            .catch(error => {
              console.log('ServiceWorker registration failed: ', error);
            });
        });
      } catch (e) {
        console.error("Couldn't register Service Worker (blob or createObjectURL might not be supported, or CSP issue):", e);
      }
    }
  </script>

</body>
</html>