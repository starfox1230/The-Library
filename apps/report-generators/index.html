<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Report Templates | The Library</title>
  <style>
    :root {
      --bg: #050611;
      --panel: #0c0f1e;
      --panel-2: #101527;
      --text: #e8ecff;
      --muted: #a6acc7;
      --accent: #4be1c3;
      --accent-2: #8ab4ff;
      --border: #1b2238;
      --shadow: 0 0 25px rgba(0, 0, 0, 0.45);
      --radius: 14px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at 15% 20%, rgba(75, 225, 195, 0.12), transparent 25%),
        radial-gradient(circle at 85% 20%, rgba(138, 180, 255, 0.12), transparent 25%),
        linear-gradient(180deg, #050611 0%, #03040e 45%, #050611 100%);
      color: var(--text);
      min-height: 100vh;
      padding: 32px 18px 60px;
    }

    .page {
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 18px;
    }

    .hero {
      background: linear-gradient(135deg, rgba(75, 225, 195, 0.16), rgba(138, 180, 255, 0.12));
      border: 1px solid rgba(255, 255, 255, 0.06);
      border-radius: 20px;
      padding: 20px 22px;
      box-shadow: var(--shadow);
      display: grid;
      gap: 12px;
    }

    .hero-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
    }

    h1 {
      margin: 0;
      font-size: 26px;
      letter-spacing: 0.01em;
    }

    .lede {
      margin: 0;
      color: var(--muted);
      line-height: 1.5;
    }

    .pill-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 9px 14px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: rgba(255, 255, 255, 0.06);
      color: var(--text);
      text-decoration: none;
      font-weight: 600;
      transition: all 0.18s ease;
    }

    .pill-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.22);
      border-color: rgba(75, 225, 195, 0.6);
    }

    .search-box {
      position: relative;
      display: flex;
      align-items: center;
      gap: 10px;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 10px 14px;
      box-shadow: var(--shadow);
    }

    .search-box input {
      width: 100%;
      background: transparent;
      border: none;
      color: var(--text);
      font-size: 15px;
      outline: none;
    }

    .search-icon {
      font-size: 18px;
      color: var(--muted);
    }

    .templates {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(270px, 1fr));
      gap: 14px;
    }

    .template-card {
      background: var(--panel-2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: var(--shadow);
      display: grid;
      gap: 10px;
    }

    .template-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .template-title {
      margin: 0;
      font-size: 17px;
      letter-spacing: 0.01em;
    }

    .badge {
      padding: 5px 10px;
      border-radius: 999px;
      font-size: 11px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      background: rgba(75, 225, 195, 0.14);
      border: 1px solid rgba(75, 225, 195, 0.35);
      color: #aaf1de;
      white-space: nowrap;
    }

    .template-desc {
      margin: 0;
      color: var(--muted);
      line-height: 1.5;
      font-size: 14px;
    }

    .tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .tag {
      font-size: 11px;
      padding: 5px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: rgba(255, 255, 255, 0.05);
      color: var(--muted);
    }

    .card-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .open-btn {
      padding: 9px 12px;
      background: linear-gradient(135deg, #4be1c3, #8ab4ff);
      border: none;
      color: #081019;
      border-radius: 10px;
      font-weight: 700;
      cursor: pointer;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
      text-decoration: none;
    }

    .open-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.25);
    }

    .empty-state {
      text-align: center;
      padding: 24px;
      color: var(--muted);
      background: var(--panel);
      border-radius: var(--radius);
      border: 1px dashed var(--border);
      display: none;
    }

    details.generator {
      margin-top: 18px;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 16px;
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    summary {
      cursor: pointer;
      padding: 16px;
      margin: 0;
      font-weight: 700;
      letter-spacing: 0.02em;
      background: rgba(255, 255, 255, 0.02);
      user-select: none;
    }

    .generator-content {
      padding: 0 16px 18px;
      display: grid;
      gap: 12px;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 10px 12px;
    }

    label {
      display: block;
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 5px;
      letter-spacing: 0.03em;
    }

    input, textarea {
      width: 100%;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: rgba(255, 255, 255, 0.03);
      color: var(--text);
      padding: 9px 10px;
      font-size: 14px;
      outline: none;
    }

    textarea { min-height: 120px; resize: vertical; }

    .muted-note {
      color: var(--muted);
      font-size: 12px;
      margin: 0;
      line-height: 1.4;
    }

    .generate-btn {
      padding: 10px 14px;
      border-radius: 12px;
      border: none;
      background: linear-gradient(135deg, #4be1c3, #8ab4ff);
      color: #080d16;
      font-weight: 800;
      cursor: pointer;
      justify-self: start;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.22);
    }

    .output-block {
      background: var(--panel-2);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px;
      display: grid;
      gap: 8px;
    }

    .code-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      background: rgba(255, 255, 255, 0.04);
      border: 1px solid rgba(255, 255, 255, 0.07);
      border-radius: 10px;
      padding: 10px 12px;
      font-family: "SFMono-Regular", Consolas, "Liberation Mono", monospace;
      font-size: 13px;
      overflow-x: auto;
    }

    pre {
      margin: 0;
      white-space: pre-wrap;
      word-break: break-word;
      font-family: "SFMono-Regular", Consolas, "Liberation Mono", monospace;
      font-size: 13px;
    }

    .copy-btn {
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(255, 255, 255, 0.06);
      color: var(--text);
      border-radius: 10px;
      padding: 6px 10px;
      cursor: pointer;
    }

    @media (max-width: 640px) {
      .hero-top { flex-direction: column; align-items: flex-start; }
      .template-header { flex-direction: column; align-items: flex-start; }
      summary { font-size: 15px; }
    }
  </style>
</head>
<body>
  <div class="page">
    <section class="hero">
      <div class="hero-top">
        <div>
          <h1>Report Template Library</h1>
          <p class="lede">Search and launch structured report templates. New templates will appear here as we add them.</p>
        </div>
        <a class="pill-btn" href="../../index.html">‚¨ÖÔ∏è Back to The Library</a>
      </div>
      <div class="search-box">
        <span class="search-icon">üîé</span>
        <input id="searchInput" type="text" placeholder="Type to filter templates..." autocomplete="off" />
      </div>
    </section>

    <section>
      <div id="templateGrid" class="templates"></div>
      <div id="emptyState" class="empty-state">No templates match your search yet.</div>
    </section>

    <details class="generator" id="generatorDetails">
      <summary>Create a new report template</summary>
      <div class="generator-content">
        <div class="grid-2">
          <div>
            <label for="templateName">Template name</label>
            <input id="templateName" type="text" placeholder="e.g., Hepatocellular Carcinoma" />
          </div>
          <div>
            <label for="templateSlug">Template folder (slug)</label>
            <input id="templateSlug" type="text" placeholder="auto-generated from name" />
          </div>
          <div>
            <label for="templateDescription">One-line description</label>
            <input id="templateDescription" type="text" placeholder="Quick summary of what this template covers" />
          </div>
          <div>
            <label for="templateTags">Tags (comma-separated)</label>
            <input id="templateTags" type="text" placeholder="liver, hcc, oncology" />
          </div>
        </div>
        <p class="muted-note">Use this helper to scaffold a new template page inside <code>apps/report-generators/templates/</code> and add it to the searchable list above.</p>
        <button class="generate-btn" id="generateBtn">Generate snippets & instructions</button>

        <div class="output-block">
          <p class="muted-note">1) Create a new file at the path below, then drop in your HTML template.</p>
          <div class="code-row">
            <span id="filePathOutput">apps/report-generators/templates/&lt;slug&gt;/index.html</span>
            <button class="copy-btn" data-copy-target="filePathOutput">Copy</button>
          </div>
          <p class="muted-note">2) Add this object to the <code>templates</code> array in <code>apps/report-generators/index.html</code> so it appears in the list.</p>
          <div class="code-row" style="align-items: flex-start;">
            <pre id="templateObjectOutput">{
  title: "Template Name",
  description: "One-line description",
  link: "templates/&lt;slug&gt;/index.html",
  tags: ["example", "tag"]
}</pre>
            <button class="copy-btn" data-copy-target="templateObjectOutput">Copy</button>
          </div>
        </div>
      </div>
    </details>
  </div>

  <script>
    const templates = [
      {
        title: "Pancreatic Adenocarcinoma (PDAC) Helper",
        description: "Comprehensive pancreas and vascular reporting helper with vessel involvement selectors and editable text.",
        link: "templates/pancreatic-adenocarcinoma/index.html",
        tags: ["pancreas", "adenocarcinoma", "pdac", "oncology", "report"],
      },
    ];

    const searchInput = document.getElementById('searchInput');
    const templateGrid = document.getElementById('templateGrid');
    const emptyState = document.getElementById('emptyState');

    function renderTemplates(filter = "") {
      templateGrid.innerHTML = "";
      const normalized = filter.trim().toLowerCase();
      const results = templates.filter((tpl) => {
        if (!normalized) return true;
        const haystack = `${tpl.title} ${tpl.description} ${tpl.tags.join(' ')}`.toLowerCase();
        return haystack.includes(normalized);
      });

      if (!results.length) {
        emptyState.style.display = 'block';
        return;
      }

      emptyState.style.display = 'none';

      results.forEach((tpl) => {
        const card = document.createElement('article');
        card.className = 'template-card';
        card.setAttribute('data-tags', tpl.tags.join(','));

        card.innerHTML = `
          <div class="template-header">
            <h2 class="template-title">${tpl.title}</h2>
            <span class="badge">Template</span>
          </div>
          <p class="template-desc">${tpl.description}</p>
          <div class="tags">${tpl.tags.map((tag) => `<span class="tag">#${tag}</span>`).join('')}</div>
          <div class="card-actions">
            <a class="open-btn" href="${tpl.link}">Open Template</a>
            <span class="muted-note">${tpl.link}</span>
          </div>
        `;

        templateGrid.appendChild(card);
      });
    }

    searchInput.addEventListener('input', (event) => {
      renderTemplates(event.target.value);
    });

    renderTemplates();

    function slugify(text) {
      return text
        .toLowerCase()
        .trim()
        .replace(/[^a-z0-9\s-]/g, '')
        .replace(/\s+/g, '-')
        .replace(/-+/g, '-');
    }

    const nameField = document.getElementById('templateName');
    const slugField = document.getElementById('templateSlug');
    const descField = document.getElementById('templateDescription');
    const tagsField = document.getElementById('templateTags');
    const filePathOutput = document.getElementById('filePathOutput');
    const templateObjectOutput = document.getElementById('templateObjectOutput');
    const generateBtn = document.getElementById('generateBtn');

    generateBtn.addEventListener('click', () => {
      const name = nameField.value.trim() || 'New Report Template';
      const slug = (slugField.value.trim() || slugify(name)) || 'new-template';
      const description = descField.value.trim() || 'Short description of the report helper.';
      const tags = (tagsField.value.trim() || 'reports').split(',').map((tag) => tag.trim()).filter(Boolean);

      const filePath = `apps/report-generators/templates/${slug}/index.html`;
      const objectSnippet = `{
  title: "${name}",
  description: "${description}",
  link: "templates/${slug}/index.html",
  tags: [${tags.map((t) => `"${t}"`).join(', ')}]
}`;

      filePathOutput.textContent = filePath;
      templateObjectOutput.textContent = objectSnippet;
      document.getElementById('generatorDetails').open = true;
    });

    document.querySelectorAll('.copy-btn').forEach((btn) => {
      btn.addEventListener('click', () => {
        const targetId = btn.getAttribute('data-copy-target');
        const target = document.getElementById(targetId);
        if (!target) return;
        const text = target.textContent;
        navigator.clipboard.writeText(text).then(() => {
          btn.textContent = 'Copied!';
          setTimeout(() => (btn.textContent = 'Copy'), 1200);
        });
      });
    });
  </script>
</body>
</html>
