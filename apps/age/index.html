<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<title>Elapsed Since 9/8/2025 12:05 PM CDT</title>
<style>
  :root{
    --bg1:#0b0f1a;
    --bg2:#0d1224;
    --panel:#11182b;
    --panel-2:#0e1426;
    --text:#e8ecff;
    --muted:#9aa6d1;
    --accent:#5ee1ff;
    --accent-2:#7a5cff;
    --ok:#36d399;
    --shadow: 0 10px 40px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.04);
    --glass: rgba(255,255,255,0.06);
    --ring: 0 0 18px rgba(94,225,255,.45), 0 0 36px rgba(122,92,255,.35);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    color:var(--text);
    background:
      radial-gradient(1200px 800px at 20% -10%, #111a35 0%, transparent 60%),
      radial-gradient(1000px 700px at 120% 120%, #151a2c 0%, transparent 60%),
      linear-gradient(160deg, var(--bg1), var(--bg2));
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
    letter-spacing:.2px;
  }
  .stars, .glow{
    position:fixed; inset:0; pointer-events:none;
  }
  .stars{
    background:
      radial-gradient(2px 2px at 20% 30%, #fff7 30%, transparent 31%) repeat,
      radial-gradient(1.5px 1.5px at 70% 60%, #fff6 30%, transparent 31%) repeat,
      radial-gradient(1px 1px at 40% 80%, #fff5 30%, transparent 31%) repeat;
    background-size: 1800px 900px, 1500px 800px, 1200px 700px;
    animation: drift 120s linear infinite;
    opacity:.35;
    filter:saturate(1.2);
  }
  @keyframes drift { to { background-position: -1800px -900px, 1500px -800px, -1200px 700px; } }

  .wrap{
    min-height:100%;
    display:flex;
    align-items:flex-start;
    justify-content:center;
    padding:24px;
  }
  .card{
    width:min(900px, 92vw);
    background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    border:1px solid rgba(255,255,255,.08);
    border-radius:20px;
    box-shadow:var(--shadow);
    padding:28px clamp(18px, 4vw, 36px);
    position:relative;
    overflow:hidden;
  }
  .card::before{
    content:"";
    position:absolute; inset:-2px;
    background:
      radial-gradient(400px 200px at 20% 0%, rgba(126, 92, 255, .25), transparent 60%),
      radial-gradient(400px 250px at 90% 20%, rgba(94, 225, 255, .18), transparent 60%);
    filter: blur(10px);
    z-index:0;
  }
  header{
    display:flex; align-items:center; justify-content:space-between;
    gap:12px; position:relative; z-index:1;
    margin-bottom:8px;
  }
  .title{
    font-weight:700; font-size:clamp(20px, 3.2vw, 28px);
    letter-spacing:.4px;
    text-shadow: 0 2px 12px rgba(122,92,255,.35);
  }
  .meta{
    font-size:12px; color:var(--muted);
    margin-top:4px;
  }
  .btn{
    appearance:none; border:0;
    background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
    color:var(--text);
    padding:10px 14px; border-radius:12px;
    font-weight:600; letter-spacing:.3px;
    box-shadow: var(--shadow);
    cursor:pointer;
    transition: transform .08s ease, box-shadow .2s ease, background .2s ease;
  }
  .btn:hover{
    transform: translateY(-1px);
    box-shadow: var(--shadow), 0 0 0 2px rgba(126,92,255,.25);
  }
  .display{
    position:relative; z-index:1;
    margin-top:10px;
    padding: 18px;
    border-radius:16px;
    background: linear-gradient(180deg, rgba(14,20,38,.7), rgba(14,20,38,.45));
    border:1px solid rgba(255,255,255,.06);
  }
  .elapsed{
    font-variant-numeric: tabular-nums;
    display:flex; flex-wrap:wrap; gap:12px 18px;
    align-items:flex-end;
    justify-content:center;
    margin: 8px 0 6px;
  }
  .chunk{
    display:flex; align-items:flex-end; gap:8px;
    padding:10px 14px;
    border-radius:12px;
    background: var(--glass);
    border:1px solid rgba(255,255,255,.06);
    min-width: max(120px, 16ch);
    justify-content:center;
    box-shadow: inset 0 0 24px rgba(126,92,255,.08), inset 0 0 60px rgba(94,225,255,.05);
  }
  .num{
    font-size:clamp(32px, 7vw, 62px);
    line-height:1; font-weight:800;
    text-shadow: var(--ring);
  }
  .label{
    font-size: clamp(12px, 1.6vw, 14px);
    color: var(--muted);
    margin-bottom:6px;
    text-transform:uppercase;
    letter-spacing:.12em;
  }
  .status{
    text-align:center;
    color:var(--muted);
    margin-top:8px;
    font-size:13px;
  }

  /* Modal */
  .modal{
    position:fixed; inset:0; display:none;
    align-items:center; justify-content:center;
    padding:20px; z-index:10;
  }
  .modal.open{ display:flex; }
  .scrim{
    position:absolute; inset:0; background:rgba(4,7,15,.6); backdrop-filter: blur(4px);
  }
  .sheet{
    position:relative; z-index:1;
    width:min(720px, 92vw);
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    border:1px solid rgba(255,255,255,.09);
    border-radius:18px; box-shadow: var(--shadow);
    padding:22px;
  }
  .sheet h2{
    margin:0 0 8px; font-size:20px;
  }
  .sheet .sub{ color:var(--muted); margin-bottom:14px; font-size:13px; }
  .options{
    display:grid; gap:10px;
    grid-template-columns: 1fr;
    margin:12px 0 18px;
  }
  .opt{
    display:flex; align-items:center; gap:12px;
    padding:12px; border-radius:12px;
    background: var(--panel);
    border:1px solid rgba(255,255,255,.08);
  }
  .opt input{ accent-color: var(--accent-2); transform: scale(1.1); }
  .opt .desc{ color:var(--muted); font-size:12px; margin-top:2px; }
  .sheet .actions{
    display:flex; justify-content:flex-end; gap:10px; margin-top:8px;
  }
  .badge{
    display:inline-flex; align-items:center; gap:8px;
    padding:6px 10px; border-radius:999px; background:var(--panel-2);
    border:1px solid rgba(255,255,255,.08); color:var(--muted);
    font-size:12px;
  }
  .ticker{
    font-variant-numeric: tabular-nums; margin-left:6px; color:#bcd7ff;
  }

  @media (prefers-reduced-motion: reduce) {
    .stars{ animation:none }
    .btn:hover{ transform:none }
  }
</style>
</head>
<body>
  <div class="stars" aria-hidden="true"></div>

  <div class="wrap">
    <div class="card" role="region" aria-label="Elapsed time since a fixed start">
      <header>
        <div>
          <div class="title">Elapsed Since Start</div>
          <div class="meta">
            Base time: <strong>Sep 8, 2025 12:05 PM CDT</strong>
            <span class="badge" title="Your device time">
              Now: <span class="ticker" id="nowTick">—</span>
            </span>
          </div>
        </div>
        <button class="btn" id="openOptions" aria-haspopup="dialog" aria-controls="modal">Options</button>
      </header>

      <section class="display" aria-live="polite">
        <div class="elapsed" id="elapsed">
          <!-- Filled by JS -->
        </div>
        <div class="status" id="status">Calculating…</div>
      </section>
    </div>
  </div>

  <!-- Options Modal -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="mTitle" aria-describedby="mDesc">
    <div class="scrim" id="closeOptions"></div>
    <div class="sheet">
      <h2 id="mTitle">Display Options</h2>
      <div class="sub" id="mDesc">Choose how to present the elapsed time. Your choice is saved for next time.</div>

      <form id="formatForm" class="options">
        <label class="opt">
          <input type="radio" name="fmt" value="dhms" />
          <div>
            <div><strong>Days • Hours • Minutes • Seconds</strong> (default)</div>
            <div class="desc">e.g., 1 day 3 hr 12 min 04 s</div>
          </div>
        </label>

        <label class="opt">
          <input type="radio" name="fmt" value="weeks" />
          <div>
            <div><strong>Weeks • Days • Hours • Minutes • Seconds</strong></div>
            <div class="desc">e.g., 0 wk 1 day 3 hr 12 min 04 s</div>
          </div>
        </label>

        <label class="opt">
          <input type="radio" name="fmt" value="ymdhms" />
          <div>
            <div><strong>Years • Months • Days • Hours • Minutes • Seconds</strong></div>
            <div class="desc">Calendar-accurate (months/years vary by length)</div>
          </div>
        </label>

        <label class="opt">
          <input type="radio" name="fmt" value="totalHours" />
          <div>
            <div><strong>Total Hours • Minutes • Seconds</strong></div>
            <div class="desc">e.g., 27 hr 12 min 04 s</div>
          </div>
        </label>

        <label class="opt">
          <input type="radio" name="fmt" value="totalSeconds" />
          <div>
            <div><strong>Total Seconds</strong></div>
            <div class="desc">e.g., 97,324 s</div>
          </div>
        </label>

        <label class="opt">
          <input type="radio" name="fmt" value="iso8601" />
          <div>
            <div><strong>ISO 8601 Duration</strong></div>
            <div class="desc">e.g., P0Y0M1DT3H12M4S</div>
          </div>
        </label>
      </form>

      <div class="actions">
        <button class="btn" id="closeBtn">Close</button>
        <button class="btn" id="saveBtn" style="background:linear-gradient(180deg, rgba(126,92,255,.35), rgba(126,92,255,.15)); box-shadow: var(--shadow), 0 0 0 2px rgba(126,92,255,.25);">Save</button>
      </div>
    </div>
  </div>

<script>
(function(){
  "use strict";

  // === Base time: 2025-09-08 12:05:00 CDT (UTC-05:00) ===
  // Hard-coded with explicit offset to be timezone-agnostic.
  const START_ISO = "2025-09-08T12:05:00-05:00";
  const start = new Date(START_ISO).getTime();

  // Storage key for the selected format
  const STORE_KEY = "elapsedTimer.format";

  // Elements
  const $elapsed = document.getElementById("elapsed");
  const $status  = document.getElementById("status");
  const $nowTick = document.getElementById("nowTick");
  const $modal   = document.getElementById("modal");
  const $open    = document.getElementById("openOptions");
  const $close   = document.getElementById("closeOptions");
  const $closeBtn= document.getElementById("closeBtn");
  const $saveBtn = document.getElementById("saveBtn");
  const $form    = document.getElementById("formatForm");

  // Default format
  const DEFAULT_FORMAT = "dhms";
  let format = (localStorage.getItem(STORE_KEY) || DEFAULT_FORMAT);

  // Initialize radio selection
  Array.from($form.elements["fmt"]).forEach(r => { r.checked = (r.value === format); });

  // Modal handlers
  function openModal(){ $modal.classList.add("open"); }
  function closeModal(){ $modal.classList.remove("open"); }
  $open.addEventListener("click", openModal);
  $close.addEventListener("click", closeModal);
  $closeBtn.addEventListener("click", closeModal);
  $saveBtn.addEventListener("click", () => {
    const choice = ($form.elements["fmt"].value || DEFAULT_FORMAT);
    format = choice;
    localStorage.setItem(STORE_KEY, format);
    closeModal();
    // Immediate refresh
    tick();
  });

  // Utilities
  const pad2 = n => String(n).padStart(2,"0");
  const comma = n => n.toLocaleString();

  function msParts(ms){
    // Returns {weeks, days, hours, minutes, seconds, totalDays, totalHours, totalMinutes, totalSeconds}
    const abs = Math.max(0, Math.floor(ms));
    const totalSeconds = Math.floor(abs/1000);
    const totalMinutes = Math.floor(abs/60000);
    const totalHours   = Math.floor(abs/3600000);
    const totalDays    = Math.floor(abs/86400000);
    let rem = abs;
    const days  = Math.floor(rem/86400000); rem -= days*86400000;
    const hours = Math.floor(rem/3600000);  rem -= hours*3600000;
    const mins  = Math.floor(rem/60000);    rem -= mins*60000;
    const secs  = Math.floor(rem/1000);
    const weeks = Math.floor(days/7);
    return {weeks, days, hours, minutes:mins, seconds:secs, totalDays, totalHours, totalMinutes, totalSeconds};
  }

  // Calendar-accurate Y/M/D/H/M/S diff (months/years vary)
  function diffCalendar(startMs, nowMs){
    let s = new Date(startMs);
    let n = new Date(nowMs);
    if (nowMs < startMs) { return {years:0, months:0, days:0, hours:0, minutes:0, seconds:0}; }

    // Years
    let years = n.getFullYear() - s.getFullYear();
    let probe = new Date(s);
    probe.setFullYear(s.getFullYear() + years);
    if (probe > n){ years--; probe.setFullYear(s.getFullYear() + years); }

    // Months
    let months = n.getMonth() - probe.getMonth();
    if (months < 0) months += 12;
    probe.setMonth(probe.getMonth() + months);
    if (probe > n){
      months--;
      probe.setMonth(probe.getMonth()); // revert
    }

    // Remaining ms
    let rem = n - probe;
    let days = Math.floor(rem / 86400000); rem -= days*86400000;
    let hours = Math.floor(rem / 3600000); rem -= hours*3600000;
    let minutes = Math.floor(rem / 60000); rem -= minutes*60000;
    let seconds = Math.floor(rem / 1000);

    return {years, months, days, hours, minutes, seconds};
  }

  // Render helpers
  function chunk(numText, labelText){
    const el = document.createElement("div");
    el.className = "chunk";
    el.innerHTML = `<div class="num">${numText}</div><div class="label">${labelText}</div>`;
    return el;
  }

  function renderDHMS(ms){
    const p = msParts(ms);
    return [
      chunk(String(p.days), "Days"),
      chunk(pad2(p.hours), "Hours"),
      chunk(pad2(p.minutes), "Minutes"),
      chunk(pad2(p.seconds), "Seconds"),
    ];
  }

  function renderWeeks(ms){
    const p = msParts(ms);
    const remDays = p.days % 7;
    return [
      chunk(String(Math.floor(p.days/7)), "Weeks"),
      chunk(String(remDays), "Days"),
      chunk(pad2(p.hours), "Hours"),
      chunk(pad2(p.minutes), "Minutes"),
      chunk(pad2(p.seconds), "Seconds"),
    ];
  }

  function renderTotalHours(ms){
    const p = msParts(ms);
    const hrs = Math.floor(ms/3600000);
    const mins = Math.floor((ms%3600000)/60000);
    const secs = Math.floor((ms%60000)/1000);
    return [
      chunk(comma(hrs), "Total Hours"),
      chunk(pad2(mins), "Minutes"),
      chunk(pad2(secs), "Seconds"),
    ];
  }

  function renderTotalSeconds(ms){
    const p = msParts(ms);
    return [ chunk(comma(p.totalSeconds), "Total Seconds") ];
  }

  function renderISO8601(startMs, nowMs){
    const d = diffCalendar(startMs, nowMs);
    const str = `P${d.years}Y${d.months}M${d.days}DT${d.hours}H${d.minutes}M${d.seconds}S`;
    return [ chunk(str, "ISO 8601 Duration") ];
  }

  function renderYMDHMS(startMs, nowMs){
    const d = diffCalendar(startMs, nowMs);
    return [
      chunk(String(d.years), "Years"),
      chunk(String(d.months), "Months"),
      chunk(String(d.days), "Days"),
      chunk(pad2(d.hours), "Hours"),
      chunk(pad2(d.minutes), "Minutes"),
      chunk(pad2(d.seconds), "Seconds"),
    ];
  }

  function formatNowStamp(){
    const now = new Date();
    // Short, local stamp
    return now.toLocaleString(undefined, {
      year:'numeric', month:'short', day:'2-digit',
      hour:'2-digit', minute:'2-digit', second:'2-digit'
    });
  }

  // Live update
  function tick(){
    const now = Date.now();
    const ms  = now - start;
    $nowTick.textContent = formatNowStamp();

    let nodes = [];
    if (ms >= 0){
      switch(format){
        case "weeks":        nodes = renderWeeks(ms); break;
        case "ymdhms":       nodes = renderYMDHMS(start, now); break;
        case "totalHours":   nodes = renderTotalHours(ms); break;
        case "totalSeconds": nodes = renderTotalSeconds(ms); break;
        case "iso8601":      nodes = renderISO8601(start, now); break;
        case "dhms":
        default:             nodes = renderDHMS(ms); break;
      }
      $status.textContent = "Elapsed since Sep 8, 2025 12:05 PM CDT";
    } else {
      // Future (shouldn't happen here, but safe)
      const until = -ms;
      nodes = renderDHMS(until);
      $status.textContent = "Starts in…";
    }

    // Paint
    $elapsed.replaceChildren(...nodes);
  }

  // Drive the clock at ~10 fps (smooth seconds, cheap CPU)
  let rafId = 0, last = 0;
  function loop(t){
    if (!last || (t - last) > 90){ tick(); last = t; }
    rafId = requestAnimationFrame(loop);
  }
  tick();
  rafId = requestAnimationFrame(loop);

  // Visibility optimization
  document.addEventListener("visibilitychange", () => {
    if (document.hidden){ cancelAnimationFrame(rafId); }
    else { last = 0; rafId = requestAnimationFrame(loop); }
  });

})();
</script>
</body>
</html>