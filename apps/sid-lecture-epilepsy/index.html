<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temporal Lobe Epilepsy & Mimics Quiz</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400&display=swap" rel="stylesheet">
    <style>
        /* CSS rules (mostly unchanged) */
        body {
            background-color: #12121f;
            color: #e0e0fc;
            font-family: 'Roboto', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
.quiz-container {
        background-color: #1a1a2e;
        padding: 30px 40px;
        border-radius: 15px;
        box-shadow: 0 0 25px rgba(74, 74, 245, 0.4),
                    0 5px 15px rgba(0, 0, 0, 0.3);
        width: 90%;
        max-width: 800px;
        text-align: center;
        border: 1px solid #3a3a5e;
        display: flex; /* Use flexbox for vertical layout */
        flex-direction: column;
        justify-content: space-between; /* Pushes nav buttons down */
        min-height: 500px; /* Ensure minimum height */
    }

    .quiz-content {
         flex-grow: 1; /* Allow content to take available space */
         margin-bottom: 20px; /* Space above navigation buttons */
    }


    h1 {
        font-family: 'Orbitron', sans-serif;
        color: #8a8aff;
        margin-bottom: 25px;
        text-shadow: 0 0 8px rgba(138, 138, 255, 0.5);
    }

    #question-counter {
        font-size: 0.9em;
        color: #aaaafc;
        margin-bottom: 15px;
    }

    #question-text {
        font-size: 1.3em;
        color: #f0f0ff;
        margin-bottom: 30px;
        line-height: 1.6;
        min-height: 60px;
    }

    .options-container {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-bottom: 30px;
    }

    .option-button {
        background-color: #2a2a4e;
        color: #d0d0fc;
        border: 1px solid #4a4a7e;
        padding: 12px 15px;
        font-size: 1em;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.1s ease, box-shadow 0.3s ease;
        text-align: left;
        width: 100%;
        box-sizing: border-box;
    }

    .option-button:hover:not(:disabled) {
        background-color: #3a3a6e;
        transform: translateY(-2px);
        box-shadow: 0 0 12px rgba(74, 74, 245, 0.3);
    }

    .option-button:active:not(:disabled) {
        transform: translateY(0px);
    }

    .option-button:disabled {
        cursor: not-allowed;
        opacity: 0.7;
    }

    .option-button.correct {
        background-color: #1f7a3f;
        border-color: #28a745;
        color: #ffffff;
        box-shadow: 0 0 15px rgba(40, 167, 69, 0.6);
        opacity: 1;
    }

    .option-button.incorrect {
        background-color: #9a2532;
        border-color: #dc3545;
        color: #ffffff;
        box-shadow: 0 0 15px rgba(220, 53, 69, 0.6);
        opacity: 1;
    }

    .option-button.reveal-correct {
        background-color: #1f7a3f !important;
        border-color: #28a745 !important;
        color: #ffffff !important;
        box-shadow: 0 0 15px rgba(40, 167, 69, 0.6) !important;
        opacity: 1 !important;
    }


    .explanation-container {
        background-color: #202035;
        border: 1px solid #3a3a5e;
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
        text-align: left;
        font-size: 0.95em;
        line-height: 1.5;
        color: #c0c0fa;
        box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);
    }

    .explanation-container strong {
        color: #8a8aff;
    }

    /* --- Navigation Button Styling --- */
    .navigation-buttons {
        display: flex;
        justify-content: space-between; /* Space out Prev/Next */
        align-items: center;
        margin-top: 30px; /* Keep margin from content above */
        width: 100%; /* Ensure full width */
    }

    .nav-button { /* Common style for Prev/Next */
        background: linear-gradient(45deg, #4a4af5, #8a8aff);
        color: white;
        border: none;
        padding: 12px 30px;
        font-size: 1.1em;
        font-family: 'Orbitron', sans-serif;
        border-radius: 25px; /* Pill shape */
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.3s ease, background 0.3s ease;
        box-shadow: 0 4px 10px rgba(74, 74, 245, 0.3);
        min-width: 120px; /* Give buttons minimum width */
        text-align: center;
    }

    .nav-button:hover:not(:disabled) {
        transform: scale(1.05);
        box-shadow: 0 6px 15px rgba(74, 74, 245, 0.5);
    }

    .nav-button:disabled {
        background: #5a5a7e; /* Different background when disabled */
        cursor: not-allowed;
        opacity: 0.6;
        box-shadow: none;
        transform: none;
    }
    /* --- End Navigation Button Styling --- */


    #completion-message {
        margin-top: 40px;
         flex-grow: 1; /* Allow it to take space when visible */
         display: flex;
         flex-direction: column;
         justify-content: center;
         align-items: center;
    }
    #completion-message h2 {
         font-family: 'Orbitron', sans-serif;
         color: #28a745;
         text-shadow: 0 0 8px rgba(40, 167, 69, 0.5);
    }

    /* Responsive adjustments */
    @media (max-width: 600px) {
        .quiz-container {
            padding: 20px;
            width: 95%;
            min-height: 400px;
        }
        h1 {
            font-size: 1.5em;
        }
        #question-text {
            font-size: 1.1em;
        }
        .option-button {
            font-size: 0.9em;
            padding: 10px 12px;
        }
        .nav-button {
            padding: 10px 20px;
            font-size: 1em;
            min-width: 100px;
        }
    }
</style>
</head>
<body>
    <div class="quiz-container">
        <!-- Content Area -->
        <div class="quiz-content">
            <h1>Temporal Lobe Epilepsy & Mimics Quiz</h1>
            <div id="question-counter"></div>
            <div id="question-text">Loading question...</div>
            <div id="answer-options" class="options-container">
                <!-- Answer buttons will be loaded here -->
            </div>
            <div id="explanation" class="explanation-container" style="display: none;">
                <!-- Explanation will be loaded here -->
            </div>
        </div>
<!-- Completion Message (Initially Hidden) -->
     <div id="completion-message" style="display: none;">
        <h2>Quiz Complete!</h2>
        <p>You have finished all the questions.</p>
    </div>

    <!-- Navigation Buttons Area -->
    <div class="navigation-buttons">
        <button id="prev-button" class="nav-button">Previous</button>
        <button id="next-button" class="nav-button">Next</button>
    </div>
</div>

<script>
    const quizData = [
        {
            question: "Relative to the hippocampus, the temporal horn of the lateral ventricle is located primarily:",
            options: ["Inferior and medial", "Superior and medial", "Superior and lateral", "Inferior and lateral"],
            correctAnswer: "Superior and lateral",
            explanation: "The lecture states: 'immediately superior or supralateral to the hippocampus is the temporal horn.' The choroid fissure is described as supramedial."
        },
        {
            question: "What anatomical structure lies immediately inferior to the main body of the hippocampus (cornu ammonis and dentate gyrus)?",
            options: ["Parahippocampal gyrus", "Temporal horn", "Subiculum", "Choroid fissure"],
            correctAnswer: "Subiculum",
            explanation: "The subiculum is described as the portion of the hippocampal formation inferior to the hippocampal sulcus, forming the transition between the cornu ammonis and the parahippocampal gyrus."
        },
        {
            question: "Mesial Temporal Sclerosis (MTS) is characterized primarily by which MRI finding?",
            options: ["Enlargement of the hippocampus", "Atrophy of the hippocampus", "Enhancement of the hippocampus", "Calcification within the hippocampus"],
            correctAnswer: "Atrophy of the hippocampus",
            explanation: "The lecture identifies the key finding of MTS as 'atrophy of the hippocampus'. While increased T2/FLAIR signal can be present due to gliosis, it's noted that atrophy is the more consistent finding, and T2 signal changes may be absent."
        },
        {
            question: "According to the lecture, Mesial Temporal Sclerosis is the most common cause of:",
            options: ["Generalized epilepsy", "Frontal lobe epilepsy", "Temporal lobe epilepsy", "Occipital lobe epilepsy"],
            correctAnswer: "Temporal lobe epilepsy",
            explanation: "The lecture explicitly states: 'Mesial temporal sclerosis is the most common cause of temporal lobe epilepsy.'"
        },
        {
            question: "What secondary MRI findings often accompany hippocampal atrophy in MTS?",
            options: ["Narrowing of the temporal horn and choroid fissure", "Widening of the temporal horn and choroid fissure", "Atrophy of the contralateral cerebellum", "Thickening of the ipsilateral cortex"],
            correctAnswer: "Widening of the temporal horn and choroid fissure",
            explanation: "Due to the volume loss (atrophy) of the hippocampus, the adjacent CSF spaces, namely the temporal horn (supralateral) and the choroid fissure (supramedial), demonstrate corresponding widening (ex vacuo dilatation)."
        },
        {
            question: "Gray matter heterotopia, seen as nodules of gray matter in an abnormal location (e.g., periventricular), results from an arrest during which phase of brain development?",
            options: ["Neuronal Proliferation (in germinal matrix)", "Neuronal Migration (from germinal matrix to cortex)", "Neuronal Organization (cortical layering/gyration)", "Myelination"],
            correctAnswer: "Neuronal Migration (from germinal matrix to cortex)",
            explanation: "The lecture describes heterotopia as resulting from an arrest in the movement of neurons from the periventricular germinal matrix to their final position in the cortex between approximately 8 and 26 weeks of gestation."
        },
        {
            question: "On MRI, how does the signal intensity of gray matter heterotopia typically compare to normal cerebral cortex?",
            options: ["Hypointense on T1, Hyperintense on T2/FLAIR", "Hyperintense on T1, Hypointense on T2/FLAIR", "Isointense on T1, Isointense or slightly Hyperintense on T2/FLAIR", "Hypointense on all sequences"],
            correctAnswer: "Isointense on T1, Isointense or slightly Hyperintense on T2/FLAIR",
            explanation: "Heterotopic gray matter is essentially normal gray matter in the wrong place. It should be isointense to cortex on T1. The lecture notes it might be slightly hyperintense on T2/FLAIR due to associated gliosis, but doesn't *have* to be."
        },
        {
            question: "Polymicrogyria refers to a disorder of which developmental process?",
            options: ["Neuronal proliferation", "Neuronal migration", "Neuronal organization (failure of gyration/layering)", "Apoptosis"],
            correctAnswer: "Neuronal organization (failure of gyration/layering)",
            explanation: "Polymicrogyria is described as a failure of organization after neurons reach the cortex, resulting in too many small, abnormally formed gyri and often abnormal layering (e.g., four layers instead of six)."
        },
        {
            question: "Despite being composed of numerous *small* gyri, what is the characteristic appearance of polymicrogyria on MRI?",
            options: ["Thin cortex with widened sulci", "Normal appearing cortex", "Thickened cortex", "Cystic degeneration of the cortex"],
            correctAnswer: "Thickened cortex",
            explanation: "The lecture emphasizes that the conglomeration of multiple tiny, fused gyri in polymicrogyria creates the *imaging appearance* of a thickened cortical ribbon, even though individual gyri are small."
        },
        {
            question: "Polymicrogyria is most commonly found in which distribution?",
            options: ["Bilateral occipital lobes", "Parasagittal frontal lobes", "Perisylvian regions", "Bilateral cerebellar hemispheres"],
            correctAnswer: "Perisylvian regions",
            explanation: "The lecture specifically highlights the Perisylvian region (around the Sylvian fissure) as the most common location for polymicrogyria, whether involving the frontal or temporal lobes bordering it."
        },
        {
            question: "Schizencephaly is characterized by a cleft extending from the ventricle to the pial surface. What tissue lines this cleft, distinguishing it from porencephaly?",
            options: ["Normal white matter", "Gliotic white matter", "Ependyma", "Gray matter (typically polymicrogyric)"],
            correctAnswer: "Gray matter (typically polymicrogyric)",
            explanation: "The key feature of schizencephaly is that the cleft is lined by gray matter, which is itself abnormal (polymicrogyric). Porencephalic cysts, resulting from destructive insults, are typically lined by white matter."
        },
        {
            question: "An 'open-lip' schizencephaly is defined by:",
            options: ["The opposing gray matter edges touching", "A CSF-filled gap separating the opposing gray matter edges", "Associated hydrocephalus", "Location only in the frontal lobe"],
            correctAnswer: "A CSF-filled gap separating the opposing gray matter edges",
            explanation: "In open-lip schizencephaly, the gray matter lining the two sides of the cleft are separated by a visible CSF space. In closed-lip, the edges are apposed."
        },
        {
            question: "Which anatomical structure's absence is commonly associated with schizencephaly?",
            options: ["Corpus callosum", "Septum pellucidum", "Hippocampus", "Cerebellar vermis"],
            correctAnswer: "Septum pellucidum",
            explanation: "The lecture lists absent septum pellucidum and corpus callosum abnormalities as potential associations with schizencephaly. Septo-optic dysplasia involves optic nerve atrophy as well."
        },
        {
            question: "What is considered the most important sequence in an epilepsy MRI protocol according to the lecture?",
            options: ["Axial T2", "Coronal FLAIR", "Diffusion Weighted Imaging (DWI)", "Coronal 3D T1-weighted"],
            correctAnswer: "Coronal 3D T1-weighted",
            explanation: "While FLAIR is crucial for signal changes, the lecture emphasizes the coronal (or reformatted from 3D) T1 sequence, especially thin-slice (1mm) 3D acquisitions, for high-resolution anatomical detail, assessing gyral thickness, and the gray-white junction."
        },
        {
             question: "Focal Cortical Dysplasia (FCD) is often subtly identified on MRI by which finding, particularly highlighted on FLAIR sequences?",
             options: ["Focal T1 hyperintensity", "A discrete enhancing nodule", "Blurring of the gray-white matter junction", "Marked cortical thinning"],
             correctAnswer: "Blurring of the gray-white matter junction",
             explanation: "FCD can be very subtle. The lecture stresses that blurring of the normally sharp transition between gray and white matter is a key sign, often best seen on FLAIR. This may be accompanied by cortical thickening or increased T2/FLAIR signal, but the blurred junction is crucial."
        },
        {
            question: "Why does the lecture advocate for whole-brain coverage rather than temporal-lobe-only imaging in epilepsy protocols?",
            options: ["To save scanning time", "Because 3D sequences inherently cover the whole brain", "To avoid missing extra-temporal seizure foci like FCD or heterotopia elsewhere", "Because temporal lobe epilepsy often spreads to other lobes"],
            correctAnswer: "To avoid missing extra-temporal seizure foci like FCD or heterotopia elsewhere",
            explanation: "Focusing only on the temporal lobes risks missing epileptogenic lesions located outside the temporal lobe, even if the clinical suspicion or EEG points towards TLE. Conditions like FCD or heterotopia can occur elsewhere and cause seizures."
        },
        {
            question: "In cases of long-standing Mesial Temporal Sclerosis, why might it become difficult to determine the side of primary involvement?",
            options: ["The affected hippocampus regenerates.", "Secondary atrophy often develops in the contralateral hippocampus.", "The T2 signal abnormality resolves completely.", "Enhancement develops bilaterally."],
            correctAnswer: "Secondary atrophy often develops in the contralateral hippocampus.",
            explanation: "The lecture explains that due to interconnections, long-standing seizures from unilateral MTS can eventually lead to secondary volume loss (atrophy) in the contralateral, initially unaffected hippocampus, making side-by-side comparison for asymmetry less reliable."
        },
        {
            question: "What approximate percentage of patients with Mesial Temporal Sclerosis also have another associated cortical abnormality, such as heterotopia or dysplasia?",
            options: ["Less than 1%", "5%", "15% (about 1 in 6)", "Over 50%"],
            correctAnswer: "15% (about 1 in 6)",
            explanation: "The lecture states that '15% of hippocampal sclerosis is associated with other cortical abnormalities,' emphasizing the need to actively search for a second lesion ('dual pathology')."
        }
    ];


    // --- DOM Element References ---
    const questionCounterElement = document.getElementById('question-counter');
    const questionTextElement = document.getElementById('question-text');
    const answerOptionsElement = document.getElementById('answer-options');
    const explanationElement = document.getElementById('explanation');
    const prevButton = document.getElementById('prev-button'); // Added
    const nextButton = document.getElementById('next-button'); // Now used for navigation
    const completionMessageElement = document.getElementById('completion-message');
    const quizContentElement = document.querySelector('.quiz-content'); // Added
    const navigationButtonsElement = document.querySelector('.navigation-buttons'); // Added

    // --- State Variables ---
    let currentQuestionIndex = 0;
    let score = 0; // Optional score tracking
    let userAnswers = new Array(quizData.length).fill(null); // Store user selections

    // --- Functions ---

    function loadQuestion() {
        // Check if quiz is finished *before* trying to load
         if (currentQuestionIndex >= quizData.length) {
            showCompletion();
            return;
        }
        // Ensure quiz content is visible and completion is hidden
        quizContentElement.style.display = 'block';
        navigationButtonsElement.style.display = 'flex'; // Make sure nav buttons are visible
        completionMessageElement.style.display = 'none';


        // Reset styles and visibility for the new question
        explanationElement.style.display = 'none';
        explanationElement.innerHTML = '';
        answerOptionsElement.innerHTML = ''; // Clear previous options

        // Get current question data
        const currentQuestion = quizData[currentQuestionIndex];

        // Update question text and counter
        questionCounterElement.textContent = `Question ${currentQuestionIndex + 1} of ${quizData.length}`;
        questionTextElement.textContent = currentQuestion.question;

        // Create and append answer buttons
        currentQuestion.options.forEach(option => {
            const button = document.createElement('button');
            button.textContent = option;
            button.classList.add('option-button');
            // Re-apply styles if the user previously answered this question
            if (userAnswers[currentQuestionIndex] !== null) {
                 button.disabled = true; // Disable options if already answered
                 if (option === userAnswers[currentQuestionIndex].selected) {
                     button.classList.add(userAnswers[currentQuestionIndex].isCorrect ? 'correct' : 'incorrect');
                 }
                 if (option === currentQuestion.correctAnswer && !userAnswers[currentQuestionIndex].isCorrect) {
                    button.classList.add('reveal-correct'); // Highlight correct if wrong answer was chosen
                 }
            } else {
                 button.addEventListener('click', selectAnswer); // Only add listener if not answered
            }
            answerOptionsElement.appendChild(button);
        });

         // Show explanation immediately if already answered
         if (userAnswers[currentQuestionIndex] !== null) {
            explanationElement.innerHTML = `<strong>Explanation:</strong> ${currentQuestion.explanation}`;
            explanationElement.style.display = 'block';
        }


        // Update navigation button states
        updateNavButtonStates();
    }

    function updateNavButtonStates() {
        prevButton.disabled = (currentQuestionIndex === 0);
        // Disable next button only if on the last question *index*
        // Allow navigation to completion screen via next button on last question
        nextButton.disabled = false; // (currentQuestionIndex === quizData.length); // Always enable next initially
        if (currentQuestionIndex === quizData.length -1) {
            nextButton.textContent = "Finish"; // Change text on last question
        } else {
             nextButton.textContent = "Next";
        }

    }

    function selectAnswer(event) {
        const selectedButton = event.target;
        const selectedAnswer = selectedButton.textContent;
        const currentQuestion = quizData[currentQuestionIndex];
        const correctAnswer = currentQuestion.correctAnswer;

        // Disable all *option* buttons only
        const optionButtons = answerOptionsElement.querySelectorAll('.option-button');
        let alreadyAnswered = false;
        optionButtons.forEach(btn => {
            if (btn.disabled) { // Check if any button is already disabled (means answered)
                alreadyAnswered = true;
            }
        });

         // Only process the answer if it hasn't been answered yet for this load
         if (alreadyAnswered) return;


        optionButtons.forEach(button => {
            button.disabled = true; // Disable options after selection
        });

        const isCorrect = selectedAnswer === correctAnswer;

        // Store the user's answer
        userAnswers[currentQuestionIndex] = {
            selected: selectedAnswer,
            isCorrect: isCorrect
        };

        // Check if the answer is correct
        if (isCorrect) {
            selectedButton.classList.add('correct');
            score++; // Optional score tracking
        } else {
            selectedButton.classList.add('incorrect');
            // Highlight the correct answer as well
            optionButtons.forEach(button => {
                if (button.textContent === correctAnswer) {
                    button.classList.add('reveal-correct');
                }
            });
        }

        // Show explanation
        explanationElement.innerHTML = `<strong>Explanation:</strong> ${currentQuestion.explanation}`;
        explanationElement.style.display = 'block';

        // Keep nav buttons enabled - user can navigate away after seeing explanation
    }

    function goToNextQuestion() {
        if (currentQuestionIndex < quizData.length - 1) {
            currentQuestionIndex++;
            loadQuestion();
        }
         // If on the last question, the next click goes to completion
        else if (currentQuestionIndex === quizData.length - 1) {
             currentQuestionIndex++; // Increment index one last time to trigger completion check
             loadQuestion(); // This will call showCompletion()
        }
    }

    function goToPreviousQuestion() {
        if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            loadQuestion();
        }
    }


    function showCompletion() {
        quizContentElement.style.display = 'none'; // Hide questions/options/explanation
        navigationButtonsElement.style.display = 'none'; // Hide nav buttons
        completionMessageElement.style.display = 'flex'; // Show completion message (use flex for centering)
        // Optional: Display score
        // Find the score based on stored answers
        let correctCount = userAnswers.filter(answer => answer && answer.isCorrect).length;
        completionMessageElement.innerHTML = `<h2>Quiz Complete!</h2> <p>You answered ${correctCount} out of ${quizData.length} questions correctly.</p>`;
    }


    // --- Event Listeners ---
    prevButton.addEventListener('click', goToPreviousQuestion);
    nextButton.addEventListener('click', goToNextQuestion);


    // --- Initial Load ---
    loadQuestion(); // Load the first question
</script>
</body>
</html>