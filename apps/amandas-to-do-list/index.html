<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amanda's Tasks</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>
    body {
        font-family: 'Poppins', sans-serif;
        background-color: #FFF0F5; /* LavenderBlush - very pale pink */
        margin: 0;
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        min-height: 100vh;
        color: #6D4C41; /* Warm Dark Brown - for main text, chic contrast */
    }

    .app-container {
        background-color: #ffffff;
        padding: 30px;
        border-radius: 16px; /* Slightly more rounded */
        box-shadow: 0 10px 30px rgba(216, 139, 167, 0.15); /* Soft pinkish shadow */
        width: 100%;
        max-width: 500px;
    }

    h1 {
        color: #C2185B; /* Deeper, elegant pink */
        text-align: center;
        margin-top: 0;
        margin-bottom: 30px; /* Increased margin */
        font-weight: 600; /* Poppins 600 is good, 700 also an option */
        letter-spacing: 0.5px; /* Slight letter spacing for chicness */
    }

    ul {
        list-style-type: none;
        padding: 0;
        margin: 0;
    }

    li {
        display: flex;
        align-items: center;
        padding: 15px 5px; /* Increased padding, less side padding for text */
        border-bottom: 1px solid #F8BBD0; /* Soft Pink border */
        transition: background-color 0.2s ease-in-out;
    }

    li:last-child {
        border-bottom: none;
    }

    .checkbox-container {
        font-size: 1.5em; /* Slightly larger icons */
        margin-right: 18px; /* Adjusted margin */
        cursor: pointer;
        width: 28px; /* Adjusted for larger icon */
        text-align: center;
        transition: color 0.2s ease-in-out;
        flex-shrink: 0; /* Prevent shrinking */
        color: #D7CCC8; /* Default icon color - light warm grey/beige */
    }

    .task-text {
        flex-grow: 1;
        font-size: 1em;
        line-height: 1.5;
        transition: color 0.3s ease, text-decoration 0.3s ease;
        cursor: pointer; /* Make text clickable */
    }

    /* State Styles for Icons */
    .checkbox-container.status-0 .fa-square { display: inline-block; } /* Default icon color set above */
    .checkbox-container.status-0 .fa-circle-half-stroke,
    .checkbox-container.status-0 .fa-check-square { display: none; }

    .checkbox-container.status-1 { color: #FFB74D; } /* Pastel Orange/Peach for in-progress icon */
    .checkbox-container.status-1 .fa-circle-half-stroke { display: inline-block; }
    .checkbox-container.status-1 .fa-square,
    .checkbox-container.status-1 .fa-check-square { display: none; }

    .checkbox-container.status-2 { color: #AED581; } /* Pastel Green for completed icon */
    .checkbox-container.status-2 .fa-check-square { display: inline-block; }
    .checkbox-container.status-2 .fa-square,
    .checkbox-container.status-2 .fa-circle-half-stroke { display: none; }


    /* State Styles for List Item & Text */
    /* li.status-0 has default .task-text color (body color) */

    li.status-1 .task-text {
        color: #8D6E63; /* Warm medium brown for in-progress text */
    }
    
    li.status-2 .task-text {
        text-decoration: line-through;
        color: #BCAAA4; /* Lighter, muted warm grey for completed text */
    }

    li:hover {
        background-color: #FFF8FA; /* Very subtle pinkish hover */
    }
    
    @media (max-width: 600px) {
        .app-container {
            padding: 20px;
            margin-top: 10px; /* Add some top margin on small screens */
        }
        h1 {
            font-size: 1.7em;
            margin-bottom: 20px;
        }
        .checkbox-container {
            font-size: 1.3em;
            margin-right: 12px;
            width: 25px;
        }
        .task-text {
            font-size: 0.95em;
        }
        li {
            padding: 12px 5px;
        }
    }
</style>
</head>
<body>
    <div class="app-container">
        <h1>Amanda's Tasks</h1>
        <ul id="taskListAmanda">
            <!-- Tasks will be rendered here by JavaScript -->
        </ul>
    </div>
<script>
    (function() {
        const STORAGE_KEY_AMANDA = 'amandaTasks_v2_storage';
        const initialDefaultAmandaTasks = [
            { id: 'amanda-task-1', text: "👕 Put rest of my clothes in bins", status: 0 },
            { id: 'amanda-task-2', text: "👟 Put my shoes in closet", status: 0 },
            { id: 'amanda-task-3', text: "👧 Put away girls’ old shoes (attic box)", status: 0 },
            { id: 'amanda-task-4', text: "🧺 Put away all my clean clothes", status: 0 },
            { id: 'amanda-task-5', text: "🛏️ Tidy our room – bench, sheets (Sterling will help)", status: 0 },
            { id: 'amanda-task-6', text: "🧼 Clean our closet dresser top", status: 0 },
            { id: 'amanda-task-7', text: "🛁 Clean bathroom countertop", status: 0 }
        ];
        let currentAmandaTasks;

        const taskListElement = document.getElementById('taskListAmanda');

        function loadTasksFromStorage() {
            try {
                const storedTasks = localStorage.getItem(STORAGE_KEY_AMANDA);
                if (storedTasks) {
                    const parsedTasks = JSON.parse(storedTasks);
                    if (Array.isArray(parsedTasks) && 
                        (parsedTasks.length === 0 || (typeof parsedTasks[0].id !== 'undefined' && typeof parsedTasks[0].status !== 'undefined'))) {
                        currentAmandaTasks = parsedTasks;
                        return;
                    } else {
                        console.warn(`Invalid data in localStorage for ${STORAGE_KEY_AMANDA}, falling back to defaults.`);
                    }
                }
            } catch (error) {
                console.error(`Error loading tasks from localStorage for ${STORAGE_KEY_AMANDA}:`, error);
            }
            // Use a deep copy of defaults if no valid storage or on error
            currentAmandaTasks = initialDefaultAmandaTasks.map(task => ({ ...task }));
        }

        function saveTasksToStorage() {
            try {
                localStorage.setItem(STORAGE_KEY_AMANDA, JSON.stringify(currentAmandaTasks));
            } catch (error) {
                console.error(`Error saving tasks to localStorage for ${STORAGE_KEY_AMANDA}:`, error);
            }
        }

        function renderTasks() {
            taskListElement.innerHTML = ''; 
            currentAmandaTasks.forEach((task) => {
                const listItem = document.createElement('li');
                listItem.setAttribute('data-id', task.id);
                listItem.className = `status-${task.status}`; // Initial class for text styling

                const checkboxContainer = document.createElement('span');
                // Set class for checkbox container styling, including initial icon color
                checkboxContainer.className = `checkbox-container status-${task.status}`;
                checkboxContainer.innerHTML = `
                    <i class="far fa-square"></i>
                    <i class="fas fa-circle-half-stroke"></i>
                    <i class="far fa-check-square"></i>
                `;
                checkboxContainer.addEventListener('click', () => toggleTaskStatus(task.id));

                const taskTextElement = document.createElement('span');
                taskTextElement.classList.add('task-text');
                taskTextElement.textContent = task.text;
                taskTextElement.addEventListener('click', () => toggleTaskStatus(task.id));

                listItem.appendChild(checkboxContainer);
                listItem.appendChild(taskTextElement);
                taskListElement.appendChild(listItem);
            });
        }

        function toggleTaskStatus(taskId) {
            const task = currentAmandaTasks.find(t => t.id === taskId);
            if (task) {
                task.status = (task.status + 1) % 3; 
                updateTaskDOM(task);
                saveTasksToStorage();
            }
        }

        function updateTaskDOM(task) {
            const listItem = taskListElement.querySelector(`li[data-id="${task.id}"]`);
            if (!listItem) return;
            const checkboxContainer = listItem.querySelector('.checkbox-container');

            // Update class for both li (for text) and checkboxContainer (for icon color and visibility)
            listItem.className = `status-${task.status}`;
            if (checkboxContainer) {
                checkboxContainer.className = `checkbox-container status-${task.status}`;
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadTasksFromStorage();
            renderTasks();
        });
    })();
</script>
</body>
</html>